!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var n=t();for(var r in n)("object"==typeof exports?exports:e)[r]=n[r]}}(window,(function(){return function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=8)}([function(e,t,n){window,e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var i=t[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)n.d(r,i,function(t){return e[t]}.bind(null,i));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="/",n(n.s=0)}([function(e,t,n){"use strict";n.r(t);var r=function(e,t,n){return Math.max(Math.min(e,Math.max(t,n)),Math.min(t,n))},i=function(e,t,n){var r,i=e;return i-=n*(r=Math.trunc(i/(n+1))),{value:i+=t,wraps:r}};function o(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var h=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5;s(this,e),u(this,"mTone",0),u(this,"mOctave",0);var r=t,i=n;if("string"==typeof t){var o=e.mParseName(t),a=o.tone,h=o.octave;r=a,i=h}this.tone(r),this.octave(i)}var t,n,h;return t=e,h=[{key:"A4Tuning",value:function(t){return t?(e.A4Tuning=t,e.A4Tuning):e.mA4Tuning}},{key:"mParseName",value:function(){var t,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",r=5,i=/(?:[A-G])|(?:(#|b)+)|([0-9]|10)/g,s=/(#|b)/g,a=/([0-9]|10)/g,u=o(n.matchAll(i));if(!u.length)throw new Error("Invalid Note Name Given");var h=u.filter((function(e){return null!=e})),c=u[0].filter((function(e){return null!=e}));switch(c[0]){case"A":t=e.tones.A;break;case"B":t=e.tones.B;break;case"C":t=e.tones.C;break;case"D":t=e.tones.D;break;case"E":t=e.tones.E;break;case"F":t=e.tones.F;break;case"G":t=e.tones.G}for(var f=h.length,l=1;l<f;l++){var d=h[l],v=d.filter((function(e){return null!=e}));if(s.test(v[0])){var p=Array.from(v[0]);p.forEach((function(e){"#"===e?t++:"b"===e&&t--}))}else a.test(v[0])&&(r=Number(v[0]))}return{tone:t,octave:r}}},{key:"A",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;return new e(2,t)}},{key:"B",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;return new e(4,t)}},{key:"C",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;return new e(5,t)}},{key:"D",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;return new e(7,t)}},{key:"E",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;return new e(9,t)}},{key:"F",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;return new e(10,t)}},{key:"G",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:5;return new e(12,t)}}],(n=[{key:"tone",value:function(e){if(!e)return this.mTone;var t=i(e,1,12),n=t.value,o=t.wraps;return this.mTone=n,this.mOctave=r(this.mOctave+o,0,10),this}},{key:"octave",value:function(e){return e?(this.mOctave=r(e,0,10),this):this.mOctave}},{key:"sharp",value:function(){var e=i(this.mTone+1,1,12),t=e.value,n=e.wraps;return this.mTone=t,this.mOctave+=n,this}},{key:"isSharp",value:function(){return 1===this.mTone||3===this.mTone||6===this.mTone||8===this.mTone||11===this.mTone}},{key:"flat",value:function(){var e=i(this.mTone-1,1,12),t=e.value,n=e.wraps;return this.mTone=t,this.mOctave+=n,this}},{key:"isFlat",value:function(){return this.isSharp()}},{key:"equals",value:function(e){return e.tone()===this.mTone&&e.octave()===this.mOctave}},{key:"copy",value:function(){return new e(this.mTone,this.mOctave)}},{key:"midiKey",get:function(){var e=21+12*this.mOctave+(this.mTone-2);return r(e,0,127)}},{key:"freq",get:function(){return Math.pow(2,(this.midiKey-69)/12)*this.A4Tuning}},{key:"asString",get:function(){var t="";switch(this.mTone){case e.tones.A:t="A";break;case e.tones.A_SHARP:t="A#/Bb";break;case e.tones.B:t="B";break;case e.tones.C:t="C";break;case e.tones.C_SHARP:t="C#/Db";break;case e.tones.D:t="D";break;case e.tones.D_SHARP:t="D#/Eb";break;case e.tones.E:t="E";break;case e.tones.F:t="F";break;case e.tones.F_SHARP:t="F#/Gb";break;case e.tones.G:t="G";break;case e.tones.G_SHARP:t="G#/Ab";break;default:t="A"}return t}}])&&a(t.prototype,n),h&&a(t,h),e}();u(h,"tones",{G_SHARP:1,A_FLAT:h.G_SHARP,A:2,A_SHARP:3,B_FLAT:h.A_SHARP,B:4,C_FLAT:h.B,C:5,B_SHARP:h.C,C_SHARP:6,D_FLAT:h.C_SHARP,D:7,D_SHARP:8,E_FLAT:h.D_SHARP,E:9,F_FLAT:h.E,F:10,E_SHARP:h.F,F_SHARP:11,G_FLAT:h.F_SHARP,G:12,TOTAL_HALF_TONES:12}),u(h,"modifier",{NATURAL:0,SHARP:1,SHARP_SHARP:2,FLAT:-1,FLAT_FLAT:-2,TOTAL_MODIFIERS:5}),u(h,"mA4Tuning",440);var c=h;function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function d(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var v=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[2,2,1,2,2,2];f(this,e),d(this,"mTemplate",[]),d(this,"mRootNote",null),d(this,"mNotes",[]),this.root(t),this.template(n)}var t,n,r;return t=e,r=[{key:"WholeTone",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[2,2,2,2,2,2])}},{key:"Major",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[2,2,1,2,2,2])}},{key:"Major7s4s5",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[2,2,2,2,1,2])}},{key:"Minor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[2,1,2,2,1,2])}},{key:"Minor7b9",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[1,2,2,2,2,1])}},{key:"Minor7b5",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[2,1,2,1,2,2])}},{key:"HarmonicMajor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[2,2,1,2,1,3])}},{key:"HarmonicMinor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[2,1,2,2,1,3])}},{key:"MelodicMinorAscend",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[2,1,2,2,2,2])}},{key:"MelodicMinorDescend",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[2,2,1,2,2,1])}},{key:"EnigmaticMajor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[1,3,2,2,2,1])}},{key:"EnigmaticMinor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[1,2,3,1,3,1])}},{key:"PentatonicMajor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[2,2,3,2,3])}},{key:"PentatonicMajorBlues",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[2,1,1,3,2])}},{key:"PentatonicMinor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[3,2,2,3,2])}},{key:"PentatonicMinorBlues",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[3,2,1,1,3])}},{key:"b5Pentatonic",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[3,2,1,4,2])}},{key:"Minor6Pentatonic",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[3,2,2,2,3])}},{key:"Dim8Tone",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[2,1,2,1,2,1,2])}},{key:"Dom8Tone",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[1,2,1,2,1,2,1])}},{key:"NeopolitanMajor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[1,2,2,2,2,2])}},{key:"NeopolitanMinor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[1,2,2,2,1,3])}},{key:"HungarianMajor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[3,1,2,1,2,1])}},{key:"HungarianMinor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[2,1,3,1,1,3])}},{key:"HungarianGypsy",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[1,3,1,2,1,3])}},{key:"Spanish",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[1,2,1,2,2,2])}},{key:"SpanishGypsy",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[1,3,1,2,1,2])}},{key:"Spanish8Tone",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[1,2,1,1,1,2,2])}},{key:"Augmented",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[3,1,3,1,3,1])}},{key:"DominantSuspended",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[2,3,2,2,1,2])}},{key:"BebopMajor",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[2,2,1,2,1,1,2])}},{key:"BebopDominant",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[2,2,1,2,2,1,1])}},{key:"Mystic",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[2,2,2,3,2])}},{key:"Overtone",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[2,2,2,1,1,2])}},{key:"LeadingTone",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[2,2,2,2,2,1])}},{key:"DoubleHarmonic",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[1,3,1,2,1,3])}},{key:"Hirojoshi",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[2,1,4,1])}},{key:"JapaneseA",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[1,4,1,3])}},{key:"JapaneseB",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[2,3,1,3])}},{key:"Oriental",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[1,3,1,1,3,1])}},{key:"Persian",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[1,4,1,2,3])}},{key:"Arabian",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[2,2,1,1,2,2])}},{key:"Balinese",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[1,2,4,1])}},{key:"Kumoi",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[2,1,4,2,2])}},{key:"Pelog",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[1,2,3,1,1])}},{key:"Algerian",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[2,1,2,1,1,1,3])}},{key:"Chinese",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[4,2,1,4])}},{key:"Egyptian",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[2,3,2,3])}},{key:"Romanian",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[2,1,3,1,2,1])}},{key:"Hindu",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[2,2,1,2,1,2])}},{key:"Insen",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[1,4,2,3])}},{key:"Iwato",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[1,4,1,4])}},{key:"Scottish",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[2,3,2,2])}},{key:"Yo",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[3,2,2,3])}},{key:"Mongolian",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[2,2,3,2])}},{key:"Istrian",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[1,2,2,2,1,2])}},{key:"UkranianDorian",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[2,1,3,1,2,1])}},{key:"Petrushka",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[1,3,2,1,3])}},{key:"Dorian",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[2,1,2,2,2,1])}},{key:"Phrygian",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[1,2,2,2,1,2])}},{key:"Lydian",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[2,2,2,1,2,2])}},{key:"LydianDominate",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[2,2,2,1,2,1])}},{key:"Mixolydian",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[2,2,1,2,2,1])}},{key:"MixolydianFlat6",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[2,2,1,2,1,2])}},{key:"Locrian",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[1,2,2,1,2,2])}},{key:"SuperLocrian",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[1,2,1,2,2,2])}},{key:"AhavaRaba",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[1,3,1,2,1,2])}}],(n=[{key:"root",value:function(e){return e?(this.mRootNote=e,this.mComputeNotes(),this):this.mRootNote}},{key:"template",value:function(e){return e?(this.mTemplate=e,this.mComputeNotes(),this):this.mTemplate}},{key:"degree",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(0===e)return this.mRootNote;var t=i(e,1,this.mNotes.length),n=t.value,r=t.wraps,o=this.mNotes[n-1];return new c(o.tone(),o.octave()+r)}},{key:"relativeMajor",value:function(){return new e(this.degree(3),[2,2,1,2,2,2])}},{key:"relativeMinor",value:function(){return new e(this.degree(6),[2,1,2,2,1,2])}},{key:"ionianMode",value:function(){return e.Major(this.mRootNote)}},{key:"dorianMode",value:function(){return e.Dorian(this.degree(2))}},{key:"phrygianMode",value:function(){return e.Phrygian(this.degree(3))}},{key:"lydianMode",value:function(){return e.Lydian(this.degree(4))}},{key:"mixolydianMode",value:function(){return e.Mixolydian(this.degree(5))}},{key:"aeolianMode",value:function(){return e.Aeolian(this.degree(6))}},{key:"locrianMode",value:function(){return e.Locrian(this.degree(7))}},{key:"parallelMode",value:function(t){if(!(t>=e.modes.IONIAN&&t<=e.modes.LOCRIAN))throw new Error("Invalid scale mode given");switch(t){case e.modes.IONIAN:this.template([2,2,1,2,2,2]);break;case e.modes.LYDIAN:this.template([2,2,2,1,2,2]);break;case e.modes.MIXOLYDIAN:this.template([2,2,1,2,2,1]);break;case e.modes.DORIAN:this.template([2,1,2,2,2,1]);break;case e.modes.AEOLIAN:this.template([2,1,2,2,1,2]);break;case e.modes.PHRYGIAN:this.template([1,2,2,2,1,2]);break;case e.modes.LOCRIAN:this.template([1,2,2,1,2,2])}return this}},{key:"mTemplateDegreeIndex",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=i(e-1,1,this.mNotes.length),n=t.value;return n-1}},{key:"mComputeNotes",value:function(){this.mNotes=[],this.mNotes.push(this.mRootNote);var e,t=this.mRootNote.tone(),n=this.mRootNote.octave();for(e=0;e<this.mTemplate.length;e++)t+=this.mTemplate[e],this.mNotes.push(new c(t,n))}},{key:"equals",value:function(e){return e.root()===this.root()&&e.template()===this.template()}},{key:"copy",value:function(){return new e(this.mRootNote,function(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(this.mTemplate))}},{key:"length",get:function(){return this.mNotes.length}},{key:"notes",get:function(){return this.mNotes}},{key:"key",get:function(){return this.mRootNote}},{key:"asString",get:function(){var e="Scale: ";return this.mNotes.forEach((function(t){e+="".concat(t.asString," ")})),e}}])&&l(t.prototype,n),r&&l(t,r),e}();d(v,"modes",{IONIAN:1,LYDIAN:2,MIXOLYDIAN:3,DORIAN:4,AEOLIAN:5,PHRYGIAN:6,LOCRIAN:7,TOTAL_MODES:7}),d(v,"HalfDim",v.Minor7b5),d(v,"Jewish",v.Spanish8Tone),d(v,"Byzantine",v.DoubleHarmonic),d(v,"Acoustic",v.LydianDominate);var p=v;function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function m(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var w=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;g(this,e),this.interval=t,this.modifier=r(n,-2,2)}var t,n;return t=e,(n=[{key:"create",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return new e(t,n)}}])&&m(t,n),e}();function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var A=w.create,S=c.modifier,k=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[A(1),A(3),A(5)],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new p;y(this,e),b(this,"mRootnote",null),b(this,"mTemplate",[]),b(this,"mScale",null),b(this,"mNotes",[]);var i=t,o=n;if("string"==typeof t){var s=e.mParseName(t),a=s.root,u=s.template;i=new c(a),o=u}this.mScale=r,this.mTemplate=o,this.root(i)}var t,n,r;return t=e,r=[{key:"mParseName",value:function(e){if(!e)throw new Error("Chord.byName(String) requires a chord name be given");for(var t,n=[A(1)],r=/[A-G]/g,i=/(#|b)*/g,o=function(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}(e.matchAll(/(?:(?:([A-G])([#b]*))|([mM])|(dim|aug|sus4|sus2)|(?:([b#]*)([4-9]|1[01])))/g)),s=o.length,a=0;a<s;a++){var u=o[a].filter((function(e){return null!=e})),h=String(u[1].charAt(0));if(r.test(h)){switch(h){case"A":t=c.tones.A;break;case"B":t=c.tones.B;break;case"C":t=c.tones.C;break;case"D":t=c.tones.D;break;case"E":t=c.tones.E;break;case"F":t=c.tones.F;break;case"G":t=c.tones.G}u.length>2&&Array.from(u[2]).forEach((function(e){"#"===e?t+=1:"b"===e&&(t-=1)}))}else if("m"===h){var f=n.findIndex((function(e){return 3===e.interval})),l=n.findIndex((function(e){return 5===e.interval}));f>-1?n[f].modifier=S.FLAT:n.push(A(3,S.FLAT)),-1===l&&n.push(A(5))}else if("M"===h){var d=n.findIndex((function(e){return 3===e.interval})),v=n.findIndex((function(e){return 5===e.interval}));d>-1?n[d].modifier=S.NATURAL:n.push(A(3)),-1===v&&n.push(A(5))}else if(i.test(h))!function(){var e=0;Array.from(u[1]).forEach((function(t){"#"===t?e++:e--}));var t=Math.round(u[2]),r=n.findIndex((function(e){return e.interval===t}));r>-1?n[r].modifier=e:n.push(A(t,e))}();else if("dim"===u[0]){var p=n.findIndex((function(e){return 5===e.interval}));p>-1?n[p].modifier=S.FLAT:n.push(A(5,S.FLAT))}else if("aug"===u[0]){var g=n.findIndex((function(e){return 5===e.interval}));g>-1?n[g].modifier=S.SHARP:n.push(A(5,S.SHARP))}else if("sus2"===u[0]){var m=n.findIndex((function(e){return 3===e.interval}));m>-1?n[m].interval=2:n.push(A(2))}else if("sus4"===h){var w=n.findIndex((function(e){return 3===e.interval}));w>-1?(n[w].interval=4,n[w].modifier=S.FLAT):n.push(A(4,S.FLAT))}}if(!t||n.length<2)throw new Error("Invalid chord name given");return n.sort((function(e,t){return e.interval-t.interval})),{root:t,template:n}}},{key:"M",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[A(1),A(3),A(5)])}},{key:"Madd4",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[A(1),A(3),A(4),A(5)])}},{key:"M6",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[A(1),A(3),A(5),A(6)])}},{key:"M69",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[A(1),A(3),A(5),A(6),A(9)])}},{key:"M7",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[A(1),A(3),A(5),A(7)])}},{key:"M9",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[A(1),A(3),A(5),A(7),A(9)])}},{key:"M11",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[A(1),A(3),A(5),A(7),A(9),A(11)])}},{key:"M13",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[A(1),A(3),A(5),A(7),A(9),A(11),A(13)])}},{key:"M7s11",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[A(1),A(3),A(5),A(7),A(11,S.SHARP)])}},{key:"Mb5",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[A(1),A(3),A(5,S.FLAT)])}},{key:"m",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[A(1),A(3,S.FLAT),A(5)])}},{key:"madd4",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[A(1),A(3,S.FLAT),A(4),A(5)])}},{key:"m6",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[A(1),A(3,S.FLAT),A(5),A(6)])}},{key:"m7",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[A(1),A(3,S.FLAT),A(5),A(7,S.FLAT)])}},{key:"madd9",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[A(1),A(3,S.FLAT),A(5),A(9)])}},{key:"m6add9",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[A(1),A(3,S.FLAT),A(5),A(6),A(9)])}},{key:"m9",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[A(1),A(3,S.FLAT),A(5),A(7,S.FLAT),A(9)])}},{key:"m11",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[A(1),A(3,S.FLAT),A(5),A(7,S.FLAT),A(9),A(11)])}},{key:"m13",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[A(1),A(3,S.FLAT),A(5),A(7,S.FLAT),A(9),A(11),A(13)])}},{key:"m7b5",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[A(1),A(3,S.FLAT),A(5,S.FLAT),A(7,S.FLAT)])}},{key:"dom7",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[A(1),A(3),A(5),A(7,S.FLAT)])}},{key:"dom9",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[A(1),A(3),A(5),A(7,S.FLAT),A(9)])}},{key:"dom11",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[A(1),A(3),A(5),A(7,S.FLAT),A(9),A(11)])}},{key:"dom13",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[A(1),A(3),A(5),A(7,S.FLAT),A(9),A(11),A(13)])}},{key:"dom7s5",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[A(1),A(3),A(5,S.SHARP),A(7,S.FLAT)])}},{key:"dom7b5",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[A(1),A(3),A(5,S.FLAT),A(7,S.FLAT)])}},{key:"dom7b9",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[A(1),A(3),A(5),A(7,S.FLAT),A(9,S.FLAT)])}},{key:"dom7s9",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[A(1),A(3),A(5),A(7,S.FLAT),A(9,S.SHARP)])}},{key:"dom9s5",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[A(1),A(3),A(5,S.SHARP),A(7,S.FLAT),A(9)])}},{key:"dom9b5",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[A(1),A(3),A(5,S.FLAT),A(7,S.FLAT),A(9)])}},{key:"dom7s5s9",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[A(1),A(3),A(5,S.SHARP),A(7,S.FLAT),A(9,S.SHARP)])}},{key:"dom7s5b9",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[A(1),A(3),A(5,S.SHARP),A(7,S.FLAT),A(9,S.FLAT)])}},{key:"dom7s11",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[A(1),A(3),A(5),A(7,S.FLAT),A(11,S.SHARP)])}},{key:"dim",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[A(1),A(3,S.FLAT),A(5,S.FLAT)])}},{key:"dim7",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[A(1),A(3,S.FLAT),A(5,S.FLAT),A(7,S.FLAT_FLAT)])}},{key:"aug",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[A(1),A(3),A(5,S.SHARP)])}},{key:"fifth",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[A(1),A(5)])}},{key:"b5",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[A(1),A(5,S.FLAT)])}},{key:"sus4",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[A(1),A(4,S.FLAT),A(5)])}},{key:"sus2",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[A(1),A(2),A(5)])}},{key:"s11",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new c;return new e(t,[A(1),A(5),A(11,S.SHARP)])}}],(n=[{key:"root",value:function(e){return e?(this.mRootnote=e,this.scale(this.mScale),this):this.mRootnote}},{key:"template",value:function(e){return e?(this.mTemplate=e,this.mComputeNotes(),this):this.pTemplate}},{key:"scale",value:function(e){return e?(this.mScale=new p(this.mRootnote,e.template()),this.mComputeNotes(),this):this.mScale}},{key:"octave",value:function(e){return e?(this.root(new c(this.mRootnote.tone(),e)),this):this.mRootnote.octave()}},{key:"invert",value:function(){var e=this.mTemplate.length;if(e<2)throw new Error("Chord doesn't have enough notes to invert");var t,n=[];for(t=1;t<e;t++)n.push(this.mTemplate[t]);var r=this.mScale.length,i=this.mTemplate[0];return i.interval+=r,n.push(i),this.template(n),this}},{key:"major",value:function(){var e=this.mTemplate.findIndex((function(e){return 3===e.interval}));return e>-1?this.mTemplate[e].modifier=S.NATURAL:this.mTemplate.push(A(3,S.NATURAL)),this.mTemplate.sort((function(e,t){return e.interval-t.interval})),this.mComputeNotes(),this}},{key:"minor",value:function(){var e=this.mTemplate.findIndex((function(e){return 3===e.interval}));return e>-1?this.mTemplate[e].modifier=S.FLAT:this.mTemplate.push(A(3,S.FLAT)),this.mTemplate.sort((function(e,t){return e.interval-t.interval})),this.mComputeNotes(),this}},{key:"diminish",value:function(){var e=this.mTemplate.findIndex((function(e){return 5===e.interval}));return e>-1?this.mTemplate[e].modifier=S.FLAT:this.mTemplate.push(A(5,S.FLAT)),this.mTemplate.sort((function(e,t){return e.interval-t.interval})),this.mComputeNotes(),this}},{key:"halfDiminish",value:function(){var e=this.mTemplate.findIndex((function(e){return 7===e.interval}));return e>-1?this.mTemplate[e].modifier=S.FLAT:this.mTemplate.push(A(7,S.FLAT)),this.mTemplate.sort((function(e,t){return e.interval-t.interval})),this.mComputeNotes(),this}},{key:"augment",value:function(){var e=this.mTemplate.findIndex((function(e){return 5===e.interval}));return e>-1?this.mTemplate[e].modifier=S.SHARP:this.mTemplate.push(A(5,S.SHARP)),this.mTemplate.sort((function(e,t){return e.interval-t.interval})),this.mComputeNotes(),this}},{key:"equals",value:function(e){return e.mRootnote.equals(this.mRootnote)&&e.mScale.equals(this.mScale)&&e.mTemplate===this.mTemplate}},{key:"copy",value:function(){return new e(this.mRootnote,this.mTemplate,this.mScale)}},{key:"mComputeNotes",value:function(){var e;for(this.mNotes=[],e=0;e<this.mTemplate.length;e++){var t=this.mScale.degree(this.mTemplate[e].interval);switch(this.mTemplate[e].modifier){case S.NATURAL:break;case S.SHARP:t.sharp();break;case S.SHARP_SHARP:t.sharp().sharp();break;case S.FLAT:t.flat();break;case S.FLAT_FLAT:t.flat().flat()}this.mNotes.push(t)}}},{key:"notes",get:function(){return this.mNotes}},{key:"asString",get:function(){var e="Chord: ";return this.mNotes.forEach((function(t){e+="".concat(t.asString," ")})),e}}])&&_(t.prototype,n),r&&_(t,r),e}();n.d(t,"Note",(function(){return c})),n.d(t,"Scale",(function(){return p})),n.d(t,"Chord",(function(){return k})),n.d(t,"ChordInterval",(function(){return w}))}])},function(e,t,n){(function(t){var r;r=function(){var r,i,o,s,a,u="undefined"==typeof window?t:window,h=Date.now||function(){return(new Date).getTime()},c=h(),f="undefined"!=typeof performance&&performance.now?function(){return performance.now()}:function(){return h()-c},l=function(e){setTimeout(e,0)};function d(){this._orig=this,this._ready=!1,this._queue=[],this._log=[]}function v(e,t){this._bad?t instanceof Function&&t.apply(this,[new Error(this._err())]):e instanceof Function&&e.apply(this,[this])}function p(e,t){this._bad?e._crash(this._err()):setTimeout((function(){e._resume()}),t)}function g(e){this._bad&&e._break(this._err()),e._resume()}function m(e,t,n){e[n]=function(){var e=arguments,r=t._image();return this._push(g,[r]),r[n].apply(r,e)}}function w(e){this._bad||(e instanceof Function?e.apply(this):console.log(e))}function y(e){this._bad&&(e instanceof Function?e.apply(this):console.log(e))}function _(e){this._bad?e._crash(this._err()):(this._break("Closed"),e._resume())}function b(e){if(e.length){var t=e.shift();if(e.length){var n=this;this._slip(y,[function(){b.apply(n,[e])}])}try{this._repair(),t.apply(this)}catch(e){this._break(e.toString())}}else this._break()}function A(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return;e.push(t)}function S(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return void e.splice(n,1)}function k(){d.apply(this)}function C(e,t,n){if(void 0===t)return C(e,[],[]);if(e instanceof Object){for(var r=0;r<t.length;r++)if(t[r]===e)return n[r];var i;for(var o in i=e instanceof Array?[]:{},t.push(e),n.push(i),e)e.hasOwnProperty(o)&&(i[o]=C(e[o],t,n));return i}return e}d.prototype._exec=function(){for(;this._ready&&this._queue.length;){var e=this._queue.shift();e[0].apply(this,e[1])}},d.prototype._push=function(e,t){this._queue.push([e,t]),d.prototype._exec.apply(this)},d.prototype._slip=function(e,t){this._queue.unshift([e,t])},d.prototype._pause=function(){this._ready=!1},d.prototype._resume=function(){this._ready=!0,d.prototype._exec.apply(this)},d.prototype._break=function(e){this._orig._bad=!0,this._orig._log.push(e||"Unknown JZZ error")},d.prototype._repair=function(){this._orig._bad=!1},d.prototype._crash=function(e){this._break(e),this._resume()},d.prototype._err=function(){return this._log[this._log.length-1]},d.prototype.log=function(){return C(this._log)},d.prototype._image=function(){var e=function(){};e.prototype=this._orig;var t=new e;return t._ready=!1,t._queue=[],t},d.prototype._thenable=function(){var e=this,t=function(){};t.prototype=e;var n=new t;return n.then=function(t,n){return e._push(v,[t,n]),this},n},d.prototype.wait=function(e){if(!e)return this;var t=this._image();return this._push(p,[t,e]),t._thenable()},d.prototype.and=function(e){return this._push(w,[e]),this._thenable()},d.prototype.or=function(e){return this._push(y,[e]),this._thenable()},d.prototype._info={},d.prototype.info=function(){var e=C(this._orig._info);return void 0===e.engine&&(e.engine="none"),void 0===e.sysex&&(e.sysex=!0),e},d.prototype.name=function(){return this.info().name},d.prototype.close=function(){var e=new d;return this._close&&this._push(this._close,[]),this._push(_,[e]),e._thenable()},k.prototype=new d,k.prototype._info={name:"JZZ.js",ver:"1.0.1",version:"1.0.1",inputs:[],outputs:[]};var T,M=[],x=[],O=[],I=[];function P(){var e,t;for(T._info.engine=$._type,T._info.version=$._version,T._info.sysex=$._sysex,T._info.inputs=[],T._info.outputs=[],M=[],x=[],$._allOuts={},$._allIns={},e=0;e<$._outs.length;e++)(t=$._outs[e]).engine=$,$._allOuts[t.name]=t,T._info.outputs.push({id:t.name,name:t.name,manufacturer:t.manufacturer,version:t.version,engine:$._type}),M.push(t);for(e=0;e<ee._outs.length;e++)t=ee._outs[e],T._info.outputs.push({id:t.name,name:t.name,manufacturer:t.manufacturer,version:t.version,engine:t.type}),M.push(t);for(e=0;e<$._ins.length;e++)(t=$._ins[e]).engine=$,$._allIns[t.name]=t,T._info.inputs.push({id:t.name,name:t.name,manufacturer:t.manufacturer,version:t.version,engine:$._type}),x.push(t);for(e=0;e<ee._ins.length;e++)t=ee._ins[e],T._info.inputs.push({id:t.name,name:t.name,manufacturer:t.manufacturer,version:t.version,engine:t.type}),x.push(t);if(T._watcher&&T._watcher._handles.length){var n=function(e,t,n,r){if(function(e,t,n,r){var i;if(e.length!=n.length||t.length!=r.length)return!0;for(i=0;i<e.length;i++)if(e[i].name!=n[i].name)return!0;for(i=0;i<t.length;i++)if(t[i].name!=r[i].name)return!0;return!1}(e,t,n,r)){var i,o=[],s=[],a=[],u=[],h={};for(i=0;i<e.length;i++)h[e[i].name]=!0;for(i=0;i<n.length;i++)h[n[i].name]||o.push(n[i]);for(h={},i=0;i<n.length;i++)h[n[i].name]=!0;for(i=0;i<e.length;i++)h[e[i].name]||a.push(e[i]);for(h={},i=0;i<t.length;i++)h[t[i].name]=!0;for(i=0;i<r.length;i++)h[r[i].name]||s.push(r[i]);for(h={},i=0;i<r.length;i++)h[r[i].name]=!0;for(i=0;i<t.length;i++)h[t[i].name]||u.push(t[i]);return{inputs:{added:o,removed:a},outputs:{added:s,removed:u}}}}(I,O,T._info.inputs,T._info.outputs);if(n){for(i=0;i<n.inputs.removed.length;i++)(t=$._inMap[n.inputs.removed[i].name])&&t._closeAll();for(i=0;i<n.outputs.removed.length;i++)(t=$._outMap[n.outputs.removed[i].name])&&t._closeAll();Z(n)}}I=T._info.inputs,O=T._info.outputs}function q(){this._bad||$._refresh(this)}function E(e,t){var n,r;e instanceof Function&&(e=e(t)),e instanceof Array||(e=[e]);var i=[],o=[],s=t.slice(),a=i;for(n=0;n<e.length;n++)if(void 0===e[n])a=o;else if(e[n]instanceof RegExp)for(r=0;r<s.length;r++)e[n].test(s[r].name)&&(a.push(s[r]),s.splice(r,1),r--);else for(r=0;r<s.length;r++)(e[n]+""==r+""||e[n]===s[r].name||e[n]instanceof Object&&e[n].name===s[r].name)&&(a.push(s[r]),s.splice(r,1),r--);return a==i?i:i.concat(s).concat(o)}function L(e,t){var n;n=t instanceof RegExp?"Port matching "+t+" not found":t instanceof Object||void 0===t?"Port not found":'Port "'+t+'" not found',e._crash(n)}function F(e,t){if(this._bad)e._crash(this._err());else{var n=E(t,M);if(!n.length)return void L(e,t);for(var r=function(e){return function(){e.engine._openOut(this,e.name)}},i=0;i<n.length;i++)n[i]=r(n[i]);e._slip(b,[n]),e._resume()}}function N(e,t){if(this._bad)e._crash(this._err());else{var n=E(t,x);if(!n.length)return void L(e,t);for(var r=function(e){return function(){e.engine._openIn(this,e.name)}},i=0;i<n.length;i++)n[i]=r(n[i]);e._slip(b,[n]),e._resume()}}function R(e,t){this._bad?e._crash():(e._slip(J,[t]),e._resume())}function B(){d.apply(this),this._handles=[],this._outs=[]}function j(e){this._bad||this._receive(e)}function D(e){this._emit(e)}function z(e){A(e instanceof Function?this._orig._handles:this._orig._outs,e)}function H(e){void 0===e?(this._orig._handles=[],this._orig._outs=[]):S(e instanceof Function?this._orig._handles:this._orig._outs,e)}function V(e,t){this._orig._mpe||(this._orig._mpe=new Ke),this._orig._mpe.setup(e,t)}function G(e){if(e!=parseInt(e)||e<0||e>15)throw RangeError("Bad channel value (must not be less than 0 or more than 15): "+e)}function U(e,t){B.apply(this),this._port=e._orig,this._chan=t,m(this,this._port,"ch"),m(this,this._port,"mpe"),m(this,this._port,"connect"),m(this,this._port,"disconnect"),m(this,this._port,"close")}function K(e,t,n){B.apply(this),this._port=e._orig,this._master=t,this._band=n,m(this,this._port,"ch"),m(this,this._port,"mpe"),m(this,this._port,"connect"),m(this,this._port,"disconnect"),m(this,this._port,"close")}function W(){d.apply(this),this._handles=[],m(this,T,"refresh"),m(this,T,"openMidiOut"),m(this,T,"openMidiIn"),m(this,T,"onChange"),m(this,T,"close")}function J(e){e instanceof Function&&(this._orig._handles.length||$._watch(),A(this._orig._handles,e))}function Q(e){void 0===e?this._orig._handles=[]:S(this._orig._handles,e),this._orig._handles.length||$._unwatch()}function Z(e){for(r=0;r<T._watcher._handles.length;r++)T._watcher._handles[r].apply(T,[e])}k.prototype.refresh=function(){return this._push(q,[]),this._thenable()},k.prototype.openMidiOut=function(e){var t=new B;return this._push(q,[]),this._push(F,[t,e]),t._thenable()},k.prototype._openMidiOutNR=function(e){var t=new B;return this._push(F,[t,e]),t._thenable()},k.prototype.openMidiIn=function(e){var t=new B;return this._push(q,[]),this._push(N,[t,e]),t._thenable()},k.prototype._openMidiInNR=function(e){var t=new B;return this._push(N,[t,e]),t._thenable()},k.prototype.onChange=function(e){this._orig._watcher||(this._orig._watcher=new W);var t=this._orig._watcher._image();return this._push(R,[t,e]),t._thenable()},k.prototype._close=function(){$._close()},B.prototype=new d,B.prototype._filter=function(e){if(this._orig._mpe){var t,n=0;this._handles&&this._handles.length&&(n=this._handles.length,t=this._handles[0]),this._outs&&this._outs.length&&(n=this._outs.length,t=this._outs[0]),1!=n||t._mpe||(e=this._orig._mpe.filter(e))}return e},B.prototype._receive=function(e){this._emit(this._filter(e))},B.prototype.send=function(){return this._push(j,[ye.apply(null,arguments)]),this._thenable()},B.prototype.note=function(e,t,n,r){return this.noteOn(e,t,n),r>0&&this.wait(r).noteOff(e,t),this._thenable()},B.prototype._emit=function(e){var t;for(t=0;t<this._handles.length;t++)this._handles[t].apply(this,[ye(e)._stamp(this)]);for(t=0;t<this._outs.length;t++){var n=ye(e);n._stamped(this._outs[t])||this._outs[t].send(n._stamp(this))}},B.prototype.emit=function(e){return this._push(D,[e]),this._thenable()},B.prototype.connect=function(e){return this._push(z,[e]),this._thenable()},B.prototype.disconnect=function(e){return this._push(H,[e]),this._thenable()},B.prototype.connected=function(){return this._orig._handles.length+this._orig._outs.length},B.prototype.ch=function(e){if(void 0===e)return this;G(e);var t=new U(this,e);return this._push(g,[t]),t._thenable()},B.prototype.mpe=function(e,t){if(void 0===e&&void 0===t)return this;Ke.validate(e,t);var n=t?new K(this,e,t):new U(this,e);return this._push(V,[e,t]),this._push(g,[n]),n._thenable()},U.prototype=new B,U.prototype.channel=function(){return this._chan},U.prototype._receive=function(e){this._port._receive(e)},U.prototype.note=function(e,t,n){return this.noteOn(e,t),n&&this.wait(n).noteOff(e),this._thenable()},K.prototype=new B,K.prototype.channel=function(){return this._master},K.prototype._receive=function(e){this._port._receive(e)},K.prototype.note=function(e,t,n){return this.noteOn(e,t),n&&this.wait(n).noteOff(e),this._thenable()},W.prototype=new d,W.prototype.connect=function(e){return this._push(J,[e]),this._thenable()},W.prototype.disconnect=function(e){return this._push(Q,[e]),this._thenable()};var Y,X,$={},ee={_outs:[],_ins:[]};function te(){if(e.exports)return t=n(3),$._type="node",$._main=t,$._pool=[],$._newPlugin=function(){return new t.MIDI},void he();var t;this._break()}function ne(){var e=document.createElement("div");e.style.visibility="hidden",document.body.appendChild(e);var t=document.createElement("object");t.style.visibility="hidden",t.style.width="0px",t.style.height="0px",t.classid="CLSID:1ACE1618-1C7D-4561-AEE1-34842AA85E90",t.type="audio/x-jazz",document.body.appendChild(t),t.isJazz?function(e){$._type="plugin",$._main=e,$._pool=[e],$._newPlugin=function(){var t=document.createElement("object");return t.style.visibility="hidden",t.style.width="0px",e.style.height="0px",t.classid="CLSID:1ACE1618-1C7D-4561-AEE1-34842AA85E90",t.type="audio/x-jazz",document.body.appendChild(t),t.isJazz?t:void 0},he()}(t):this._break()}if("undefined"!=typeof navigator&&navigator.requestMIDIAccess){Y=navigator,X=navigator.requestMIDIAccess;try{-1!=X.toString().indexOf("JZZ(")&&(X=void 0)}catch(e){}}function re(){if(X){var e=this;return X.call(Y,{}).then((function(t){ce(t),e._resume()}),(function(t){e._crash(t)})),void this._pause()}this._break()}function ie(){if(X){var e=this;return X.call(Y,{sysex:!0}).then((function(t){ce(t,!0),e._resume()}),(function(t){e._crash(t)})),void this._pause()}this._break()}function oe(){var e,t,n=this;this._pause(),document.addEventListener("jazz-midi-msg",(function r(){if(e=!0,t||(t=document.getElementById("jazz-midi-msg")),t){var i=[];try{i=JSON.parse(t.innerText)}catch(e){}t.innerText="",document.removeEventListener("jazz-midi-msg",r),"version"===i[0]?(function(e,t){function n(){for(var e=0;e<this.clients.length;e++)this._close(this.clients[e])}var r;$._type="extension",$._version=t,$._sysex=!0,$._pool=[],$._outs=[],$._ins=[],$._inArr=[],$._outArr=[],$._inMap={},$._outMap={},$._outsW=[],$._insW=[],$.refreshClients=[],$._msg=e,$._newPlugin=function(){var e={id:$._pool.length};$._pool.push(e),e.id?document.dispatchEvent(new CustomEvent("jazz-midi",{detail:["new"]})):e.ready=!0},$._newPlugin(),$._refresh=function(e){$.refreshClients.push(e),e._pause(),l((function(){document.dispatchEvent(new CustomEvent("jazz-midi",{detail:["refresh"]}))}))},$._openOut=function(e,t){var r=$._outMap[t];if(!r){$._pool.length<=$._outArr.length&&$._newPlugin();var i=$._pool[$._outArr.length];(r={name:t,clients:[],info:{name:t,manufacturer:$._allOuts[t].manufacturer,version:$._allOuts[t].version,type:"MIDI-out",sysex:$._sysex,engine:$._type},_start:function(){document.dispatchEvent(new CustomEvent("jazz-midi",{detail:["openout",i.id,t]}))},_close:function(e){$._closeOut(e)},_closeAll:n,_receive:function(e){if(e.length){var t=e.slice();t.splice(0,0,"play",i.id),document.dispatchEvent(new CustomEvent("jazz-midi",{detail:t}))}}}).plugin=i,i.output=r,$._outArr.push(r),$._outMap[t]=r}e._orig._impl=r,A(r.clients,e._orig),e._info=r.info,e._receive=function(e){r._receive(e)},e._close=function(){r._close(this)},r.open||(e._pause(),r.plugin.ready&&r._start())},$._openIn=function(e,t){var r=$._inMap[t];if(!r){$._pool.length<=$._inArr.length&&$._newPlugin();var i=$._pool[$._inArr.length];(r={name:t,clients:[],info:{name:t,manufacturer:$._allIns[t].manufacturer,version:$._allIns[t].version,type:"MIDI-in",sysex:$._sysex,engine:$._type},_start:function(){document.dispatchEvent(new CustomEvent("jazz-midi",{detail:["openin",i.id,t]}))},_close:function(e){$._closeIn(e)},_closeAll:n}).plugin=i,i.input=r,$._inArr.push(r),$._inMap[t]=r}e._orig._impl=r,A(r.clients,e._orig),e._info=r.info,e._close=function(){r._close(this)},r.open||(e._pause(),r.plugin.ready&&r._start())},$._closeOut=function(e){var t=e._impl;S(t.clients,e._orig),!t.clients.length&&t.open&&(t.open=!1,document.dispatchEvent(new CustomEvent("jazz-midi",{detail:["closeout",t.plugin.id]})))},$._closeIn=function(e){var t=e._impl;S(t.clients,e._orig),!t.clients.length&&t.open&&(t.open=!1,document.dispatchEvent(new CustomEvent("jazz-midi",{detail:["closein",t.plugin.id]})))},$._close=function(){$._unwatch()},$._watch=function(){$._insW=$._ins,$._outsW=$._outs,r=setInterval((function(){document.dispatchEvent(new CustomEvent("jazz-midi",{detail:["refresh"]}))}),250)},$._unwatch=function(){clearInterval(r),r=void 0},document.addEventListener("jazz-midi-msg",(function(){var e,t,n,r=$._msg.innerText.split("\n");for($._msg.innerText="",t=0;t<r.length;t++){var i=[];try{i=JSON.parse(r[t])}catch(e){}if(i.length)if("refresh"===i[0]){if(i[1].ins){for(n=0;n<i[1].ins.length;n++)i[1].ins[n].type=$._type;$._ins=i[1].ins}if(i[1].outs){for(n=0;n<i[1].outs.length;n++)i[1].outs[n].type=$._type;$._outs=i[1].outs}for(P(),n=0;n<$.refreshClients.length;n++)$.refreshClients[n]._resume();$.refreshClients=[]}else if("version"===i[0]){var o=$._pool[i[1]];o&&(o.ready=!0,o.input&&o.input._start(),o.output&&o.output._start())}else if("openout"===i[0]){if(e=$._pool[i[1]].output)if(i[2]==e.name){if(e.open=!0,e.clients)for(n=0;n<e.clients.length;n++)e.clients[n]._resume()}else if(e.clients)for(n=0;n<e.clients.length;n++)e.clients[n]._crash()}else if("openin"===i[0]){if(e=$._pool[i[1]].input)if(i[2]==e.name){if(e.open=!0,e.clients)for(n=0;n<e.clients.length;n++)e.clients[n]._resume()}else if(e.clients)for(n=0;n<e.clients.length;n++)e.clients[n]._crash()}else if("midi"===i[0]&&(e=$._pool[i[1]].input)&&e.clients)for(n=0;n<e.clients.length;n++){var s=ye(i.slice(3));e.clients[n]._emit(s)}}}))}(t,i[2]),n._resume()):n._crash()}}));try{document.dispatchEvent(new Event("jazz-midi"))}catch(e){}l((function(){e||n._crash()}))}function se(){this._pause();var e=this;l((function(){e._crash()}))}function ae(e){for(var t=[],n=function(e){var t=["node","extension","plugin","webmidi"];if(!e||!e.engine)return t;var n,r,i,o=e.engine instanceof Array?e.engine:[e.engine],s={},a=[],u=[];for(i=0;i<o.length;i++){var h=o[i].toString().toLowerCase();s[h]||(s[h]=!0,"none"===h&&(n=!0),"etc"!==h&&void 0!==h||(r=!0),r?u.push(h):a.push(h),S(t,h))}return(r||a.length||u.length)&&(n=!1),n?[]:a.concat(r?t:u)}(e),r=0;r<n.length;r++)"webmidi"==n[r]?(e&&!0===e.sysex&&t.push(ie),e&&!0===e.sysex&&!0!==e.degrade||t.push(re)):"node"==n[r]?(t.push(te),t.push(se)):"extension"==n[r]?t.push(oe):"plugin"==n[r]&&t.push(ne);return t.push(ue),t}function ue(){$._type="none",$._version="1.0.1",$._sysex=!0,$._outs=[],$._ins=[],$._refresh=function(){P()},$._watch=function(){},$._unwatch=function(){},$._close=function(){}}function he(){var e;function t(){for(var e=0;e<this.clients.length;e++)this._close(this.clients[e])}$._inArr=[],$._outArr=[],$._inMap={},$._outMap={},$._outsW=[],$._insW=[],$._version=$._main.version,$._sysex=!0,$._refresh=function(){var e,t;for($._outs=[],$._ins=[],e=0;(t=$._main.MidiOutInfo(e)).length;e++)$._outs.push({type:$._type,name:t[0],manufacturer:t[1],version:t[2]});for(e=0;(t=$._main.MidiInInfo(e)).length;e++)$._ins.push({type:$._type,name:t[0],manufacturer:t[1],version:t[2]});P()},$._openOut=function(e,n){var r=$._outMap[n];if(!r){$._pool.length<=$._outArr.length&&$._pool.push($._newPlugin()),r={name:n,clients:[],info:{name:n,manufacturer:$._allOuts[n].manufacturer,version:$._allOuts[n].version,type:"MIDI-out",sysex:$._sysex,engine:$._type},_close:function(e){$._closeOut(e)},_closeAll:t,_receive:function(e){e.length&&this.plugin.MidiOutRaw(e.slice())}};var i=$._pool[$._outArr.length];r.plugin=i,$._outArr.push(r),$._outMap[n]=r}if(!r.open){var o=r.plugin.MidiOutOpen(n);if(o!==n)return o&&r.plugin.MidiOutClose(),void e._break();r.open=!0}e._orig._impl=r,A(r.clients,e._orig),e._info=r.info,e._receive=function(e){r._receive(e)},e._close=function(){r._close(this)}},$._openIn=function(e,n){var r,i=$._inMap[n];if(!i){$._pool.length<=$._inArr.length&&$._pool.push($._newPlugin()),(i={name:n,clients:[],info:{name:n,manufacturer:$._allIns[n].manufacturer,version:$._allIns[n].version,type:"MIDI-in",sysex:$._sysex,engine:$._type},_close:function(e){$._closeIn(e)},_closeAll:t,handle:function(e,t){for(var n=0;n<this.clients.length;n++){var r=ye(t);this.clients[n]._emit(r)}}}).onmidi=(r=i,function(e,t){r.handle(e,t)});var o=$._pool[$._inArr.length];i.plugin=o,$._inArr.push(i),$._inMap[n]=i}if(!i.open){var s=i.plugin.MidiInOpen(n,i.onmidi);if(s!==n)return s&&i.plugin.MidiInClose(),void e._break();i.open=!0}e._orig._impl=i,A(i.clients,e._orig),e._info=i.info,e._close=function(){i._close(this)}},$._closeOut=function(e){var t=e._impl;S(t.clients,e._orig),!t.clients.length&&t.open&&(t.open=!1,t.plugin.MidiOutClose())},$._closeIn=function(e){var t=e._impl;S(t.clients,e._orig),!t.clients.length&&t.open&&(t.open=!1,t.plugin.MidiInClose())},$._close=function(){for(var e=0;e<$._inArr.length;e++)$._inArr[e].open&&$._inArr[e].plugin.MidiInClose();$._unwatch()},$._watch=function(){e||(e=setInterval((function(){$._refresh()}),250))},$._unwatch=function(){e&&clearInterval(e),e=void 0}}function ce(e,t){var n;function r(){for(var e=0;e<this.clients.length;e++)this._close(this.clients[e])}$._type="webmidi",$._version=43,$._sysex=!!t,$._access=e,$._inMap={},$._outMap={},$._outsW=[],$._insW=[],$._refresh=function(){$._outs=[],$._ins=[],$._access.outputs.forEach((function(e){$._outs.push({type:$._type,name:e.name,manufacturer:e.manufacturer,version:e.version})})),$._access.inputs.forEach((function(e){$._ins.push({type:$._type,name:e.name,manufacturer:e.manufacturer,version:e.version})})),P()},$._openOut=function(e,t){var n,i=$._outMap[t];i||(i={name:t,clients:[],info:{name:t,manufacturer:$._allOuts[t].manufacturer,version:$._allOuts[t].version,type:"MIDI-out",sysex:$._sysex,engine:$._type},_close:function(e){$._closeOut(e)},_closeAll:r,_receive:function(e){i.dev&&e.length&&this.dev.send(e.slice())}}),$._access.outputs.forEach((function(e){e.name===t&&(n=e)})),n?(i.dev=n,$._outMap[t]=i,e._orig._impl=i,A(i.clients,e._orig),e._info=i.info,e._receive=function(e){i._receive(e)},e._close=function(){i._close(this)},i.dev.open&&(e._pause(),i.dev.open().then((function(){e._resume()}),(function(){e._crash()})))):e._break()},$._openIn=function(e,t){var n,i,o=$._inMap[t];o||(o={name:t,clients:[],info:{name:t,manufacturer:$._allIns[t].manufacturer,version:$._allIns[t].version,type:"MIDI-in",sysex:$._sysex,engine:$._type},_close:function(e){$._closeIn(e)},_closeAll:r,handle:function(e){for(var t=0;t<this.clients.length;t++){var n=ye([].slice.call(e.data));this.clients[t]._emit(n)}}}),$._access.inputs.forEach((function(e){e.name===t&&(n=e)})),n?(o.dev=n,o.dev.onmidimessage=(i=o,function(e){i.handle(e)}),$._inMap[t]=o,e._orig._impl=o,A(o.clients,e._orig),e._info=o.info,e._close=function(){o._close(this)},o.dev.open&&(e._pause(),o.dev.open().then((function(){e._resume()}),(function(){e._crash()})))):e._break()},$._closeOut=function(e){var t=e._impl;S(t.clients,e._orig),t.clients.length||(t.dev&&t.dev.close&&t.dev.close(),t.dev=void 0)},$._closeIn=function(e){var t=e._impl;S(t.clients,e._orig),t.clients.length||(t.dev&&(t.dev.onmidimessage=null,t.dev.close&&t.dev.close()),t.dev=void 0)},$._close=function(){$._unwatch()},$._watch=function(){$._access.onstatechange=function(){n=!0,l((function(){n&&($._refresh(),n=!1)}))}},$._unwatch=function(){$._access.onstatechange=void 0}}var fe=function(e){return T||function(e){We(),(T=new k)._options=e,T._push(b,[ae(e)]),T.refresh(),T._resume()}(e),T._thenable()};function le(){var e=this instanceof le?this:e=new le;return le.prototype.reset.apply(e,arguments),e}function de(){29.97==this.type&&!this.second&&this.frame<2&&this.minute%10&&(this.frame=2)}function ve(e){return[[24,25,29.97,30][e[7]>>1&3],(1&e[7])<<4|e[6],e[5]<<4|e[4],e[3]<<4|e[2],e[1]<<4|e[0]]}function pe(e){var t;switch(!e.backwards&&e.quarter>=4?e.decrFrame():e.backwards&&e.quarter<4&&e.incrFrame(),e.quarter>>1){case 0:t=e.frame;break;case 1:t=e.second;break;case 2:t=e.minute;break;default:t=e.hour}return 1&e.quarter?t>>=4:t&=15,7==e.quarter&&(25==e.type?t|=2:29.97==e.type?t|=4:30==e.type&&(t|=6)),!e.backwards&&e.quarter>=4?e.incrFrame():e.backwards&&e.quarter<4&&e.decrFrame(),t|e.quarter<<4}function ge(e){return 25==e.type?32|e.hour:29.97==e.type?64|e.hour:30==e.type?96|e.hour:e.hour}function me(e){return e<10?"0"+e:e}function we(e){for(var t=[],n=0;n<e.length;n++)t[n]=me(e[n]);return t.join(":")}function ye(e){var t,n=this instanceof ye?this:n=new ye;if(e instanceof ye){for(t in n._from=e._from.slice(),e)e.hasOwnProperty(t)&&"_from"!=t&&(n[t]=e[t]);return n}if(n._from=[],void 0===e)return n;var r=e instanceof Array?e:arguments;for(t=0;t<r.length;t++)a=r[t],1==t&&(n[0]>=128&&n[0]<=175&&(a=ye.noteValue(a)),n[0]>=192&&n[0]<=207&&(a=ye.programValue(a))),(a!=parseInt(a)||a<0||a>255)&&Ae(r[t]),n.push(a);return n}fe.JZZ=fe,fe.info=function(){return k.prototype.info()},fe.Widget=function(e){var t=new B;if(e instanceof Object)for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t._resume(),t},k.prototype.Widget=fe.Widget,le.prototype.reset=function(e){if(e instanceof le)return this.setType(e.getType()),this.setHour(e.getHour()),this.setMinute(e.getMinute()),this.setSecond(e.getSecond()),this.setFrame(e.getFrame()),this.setQuarter(e.getQuarter()),this;var t=e instanceof Array?e:arguments;return this.setType(t[0]),this.setHour(t[1]),this.setMinute(t[2]),this.setSecond(t[3]),this.setFrame(t[4]),this.setQuarter(t[5]),this},le.prototype.isFullFrame=function(){return 0==this.quarter||4==this.quarter},le.prototype.getType=function(){return this.type},le.prototype.getHour=function(){return this.hour},le.prototype.getMinute=function(){return this.minute},le.prototype.getSecond=function(){return this.second},le.prototype.getFrame=function(){return this.frame},le.prototype.getQuarter=function(){return this.quarter},le.prototype.setType=function(e){if(void 0===e||24==e)this.type=24;else if(25==e)this.type=25;else if(29.97==e)this.type=29.97,de.apply(this);else{if(30!=e)throw RangeError("Bad SMPTE frame rate: "+e);this.type=30}return this.frame>=this.type&&(this.frame=this.type-1),this},le.prototype.setHour=function(e){if(void 0===e&&(e=0),e!=parseInt(e)||e<0||e>=24)throw RangeError("Bad SMPTE hours value: "+e);return this.hour=e,this},le.prototype.setMinute=function(e){if(void 0===e&&(e=0),e!=parseInt(e)||e<0||e>=60)throw RangeError("Bad SMPTE minutes value: "+e);return this.minute=e,de.apply(this),this},le.prototype.setSecond=function(e){if(void 0===e&&(e=0),e!=parseInt(e)||e<0||e>=60)throw RangeError("Bad SMPTE seconds value: "+e);return this.second=e,de.apply(this),this},le.prototype.setFrame=function(e){if(void 0===e&&(e=0),e!=parseInt(e)||e<0||e>=this.type)throw RangeError("Bad SMPTE frame number: "+e);return this.frame=e,de.apply(this),this},le.prototype.setQuarter=function(e){if(void 0===e&&(e=0),e!=parseInt(e)||e<0||e>=8)throw RangeError("Bad SMPTE quarter frame: "+e);return this.quarter=e,this},le.prototype.incrFrame=function(){return this.frame++,this.frame>=this.type&&(this.frame=0,this.second++,this.second>=60&&(this.second=0,this.minute++,this.minute>=60&&(this.minute=0,this.hour=this.hour>=23?0:this.hour+1))),de.apply(this),this},le.prototype.decrFrame=function(){return!this.second&&2==this.frame&&29.97==this.type&&this.minute%10&&(this.frame=0),this.frame--,this.frame<0&&(this.frame=29.97==this.type?29:this.type-1,this.second--,this.second<0&&(this.second=59,this.minute--,this.minute<0&&(this.minute=59,this.hour=this.hour?this.hour-1:23))),this},le.prototype.incrQF=function(){return this.backwards=!1,this.quarter=this.quarter+1&7,0!=this.quarter&&4!=this.quarter||this.incrFrame(),this},le.prototype.decrQF=function(){return this.backwards=!0,this.quarter=this.quarter+7&7,3!=this.quarter&&7!=this.quarter||this.decrFrame(),this},le.prototype.read=function(e){if(e instanceof ye||(e=ye.apply(null,arguments)),240==e[0]&&127==e[1]&&1==e[3]&&1==e[4]&&247==e[9])return this.type=[24,25,29.97,30][e[5]>>5&3],this.hour=31&e[5],this.minute=e[6],this.second=e[7],this.frame=e[8],this.quarter=0,this._=void 0,this._b=void 0,this._f=void 0,!0;if(241==e[0]&&void 0!==e[1]){var t=e[1]>>4,n=15&e[1];return 0==t?7==this._&&(7==this._f&&(this.reset(ve(this._a)),this.incrFrame()),this.incrFrame()):3==t?4==this._&&this.decrFrame():4==t?3==this._&&this.incrFrame():7==t&&0===this._&&(0===this._b&&(this.reset(ve(this._a)),this.decrFrame()),this.decrFrame()),this._a||(this._a=[]),this._a[t]=n,this._f=this._f===t-1||0==t?t:void 0,this._b=this._b===t+1||7==t?t:void 0,this._=t,this.quarter=t,!0}return!1},le.prototype.toString=function(){return we([this.hour,this.minute,this.second,this.frame])},fe.SMPTE=le,ye.prototype=[],ye.prototype.constructor=ye;var _e={};ye.noteValue=function(e){return void 0===e?void 0:_e[e.toString().toLowerCase()]},ye.programValue=function(e){return e},ye.freq=function(e,t){return void 0===t&&(t=440),t*Math.pow(2,(ke(ye.noteValue(e),e)-69)/12)};var be={c:0,d:2,e:4,f:5,g:7,a:9,b:11,h:11};for(o in be)if(be.hasOwnProperty(o))for(a=0;a<12&&!((s=be[o]+12*a)>127);a++)_e[o+a]=s,s>0&&(_e[o+"b"+a]=s-1,_e[o+"bb"+a]=s-2),s<127&&(_e[o+"#"+a]=s+1,_e[o+"##"+a]=s+2);for(a=0;a<128;a++)_e[a]=a;function Ae(e){throw RangeError("Bad MIDI value: "+e)}function Se(e){return G(e),parseInt(e)}function ke(e,t){return(e!=parseInt(e)||e<0||e>127)&&Ae(void 0===t?e:t),parseInt(e)}function Ce(e,t){return(e!=parseInt(e)||e<0||e>255)&&Ae(void 0===t?e:t),parseInt(e)}function Te(e){return(e!=parseInt(e)||e<0||e>16383)&&Ae(e),127&parseInt(e)}function Me(e){return(e!=parseInt(e)||e<0||e>16383)&&Ae(e),parseInt(e)>>7}var xe={noteOff:function(e,t,n){return void 0===n&&(n=64),[128+Se(e),ke(ye.noteValue(t),t),ke(n)]},noteOn:function(e,t,n){return void 0===n&&(n=127),[144+Se(e),ke(ye.noteValue(t),t),ke(n)]},aftertouch:function(e,t,n){return[160+Se(e),ke(ye.noteValue(t),t),ke(n)]},control:function(e,t,n){return[176+Se(e),ke(t),ke(n)]},program:function(e,t){return[192+Se(e),ke(ye.programValue(t),t)]},pressure:function(e,t){return[208+Se(e),ke(t)]},pitchBend:function(e,t){return[224+Se(e),Te(t),Me(t)]},bankMSB:function(e,t){return[176+Se(e),0,ke(t)]},bankLSB:function(e,t){return[176+Se(e),32,ke(t)]},modMSB:function(e,t){return[176+Se(e),1,ke(t)]},modLSB:function(e,t){return[176+Se(e),33,ke(t)]},breathMSB:function(e,t){return[176+Se(e),2,ke(t)]},breathLSB:function(e,t){return[176+Se(e),34,ke(t)]},footMSB:function(e,t){return[176+Se(e),4,ke(t)]},footLSB:function(e,t){return[176+Se(e),36,ke(t)]},portamentoMSB:function(e,t){return[176+Se(e),5,ke(t)]},portamentoLSB:function(e,t){return[176+Se(e),37,ke(t)]},volumeMSB:function(e,t){return[176+Se(e),7,ke(t)]},volumeLSB:function(e,t){return[176+Se(e),39,ke(t)]},balanceMSB:function(e,t){return[176+Se(e),8,ke(t)]},balanceLSB:function(e,t){return[176+Se(e),40,ke(t)]},panMSB:function(e,t){return[176+Se(e),10,ke(t)]},panLSB:function(e,t){return[176+Se(e),42,ke(t)]},expressionMSB:function(e,t){return[176+Se(e),11,ke(t)]},expressionLSB:function(e,t){return[176+Se(e),43,ke(t)]},damper:function(e,t){return[176+Se(e),64,t?127:0]},portamento:function(e,t){return[176+Se(e),65,t?127:0]},sostenuto:function(e,t){return[176+Se(e),66,t?127:0]},soft:function(e,t){return[176+Se(e),67,t?127:0]},allSoundOff:function(e){return[176+Se(e),120,0]},allNotesOff:function(e){return[176+Se(e),123,0]}},Oe={mtc:function(e){return[241,pe(e)]},songPosition:function(e){return[242,Te(e),Me(e)]},songSelect:function(e){return[243,ke(e)]},tune:function(){return[246]},clock:function(){return[248]},start:function(){return[250]},continue:function(){return[251]},stop:function(){return[252]},active:function(){return[254]},sxIdRequest:function(){return[240,126,127,6,1,247]},sxFullFrame:function(e){return[240,127,127,1,1,ge(e),e.getMinute(),e.getSecond(),e.getFrame(),247]},reset:function(){return[255]}};function Ie(e,t){var n=new ye;return n.ff=Ce(e),n.dd=void 0===t?"":function(e){e=""+e;for(var t=0;t<e.length;t++)e.charCodeAt(t)>255&&Ae(e[t]);return e}(t),n}var Pe={smf:function(e){if(e instanceof ye)return new ye(e);var t=e instanceof Array?e:arguments,n=Ce(t[0]),r="";return 2==t.length?r=ze(t[1]):t.length>2&&(r=ze(Array.prototype.slice.call(t,1))),Ie(n,r)},smfSeqNumber:function(e){if(e==parseInt(e)){if(e<0||e>65535)throw RangeError("Sequence number out of range: "+e);e=String.fromCharCode(e>>8)+String.fromCharCode(255&e)}else if(0==(e=""+e).length)e="\0\0";else if(1==e.length)e="\0"+e;else if(e.length>2)throw RangeError("Sequence number out of range: "+Ue(e));return Ie(0,e)},smfText:function(e){return Ie(1,fe.lib.toUTF8(e))},smfCopyright:function(e){return Ie(2,fe.lib.toUTF8(e))},smfSeqName:function(e){return Ie(3,fe.lib.toUTF8(e))},smfInstrName:function(e){return Ie(4,fe.lib.toUTF8(e))},smfLyric:function(e){return Ie(5,fe.lib.toUTF8(e))},smfMarker:function(e){return Ie(6,fe.lib.toUTF8(e))},smfCuePoint:function(e){return Ie(7,fe.lib.toUTF8(e))},smfProgName:function(e){return Ie(8,fe.lib.toUTF8(e))},smfDevName:function(e){return Ie(9,fe.lib.toUTF8(e))},smfChannelPrefix:function(e){if(e==parseInt(e))G(e),e=String.fromCharCode(e);else if(0==(e=""+e).length)e="\0";else if(e.length>1||e.charCodeAt(0)>15)throw RangeError("Channel number out of range: "+Ue(e));return Ie(32,e)},smfMidiPort:function(e){if(e==parseInt(e)){if(e<0||e>127)throw RangeError("Port number out of range: "+e);e=String.fromCharCode(e)}else if(0==(e=""+e).length)e="\0";else if(e.length>1||e.charCodeAt(0)>127)throw RangeError("Port number out of range: "+Ue(e));return Ie(33,e)},smfEndOfTrack:function(e){if(""!=ze(e))throw RangeError("Unexpected data: "+Ue(ze(e)));return Ie(47)},smfTempo:function(e){if(3==(""+e).length)return Ie(81,e);if(e==parseInt(e)&&e>0&&e<=16777215)return Ie(81,String.fromCharCode(e>>16)+String.fromCharCode(e>>8&255)+String.fromCharCode(255&e));throw RangeError("Out of range: "+Ue(ze(e)))},smfBPM:function(e){return Pe.smfTempo(Math.round(6e7/e))},smfSMPTE:function(e){if(e instanceof le)return Ie(84,String.fromCharCode(e.hour)+String.fromCharCode(e.minute)+String.fromCharCode(e.second)+String.fromCharCode(e.frame)+String.fromCharCode(e.quarter%4*25));var t=""+e;if(5==t.length)return Ie(84,e);var n=e instanceof Array?e:Array.prototype.slice.call(arguments);return n.splice(0,0,30),Pe.smfSMPTE(new le(n))},smfTimeSignature:function(e,t,n,r){var i,o,s,a,u=(""+e).match(/^\s*(\d+)\s*\/\s*(\d+)\s*$/);if(u){if(i=parseInt(u[1]),o=parseInt(u[2]),i>0&&i<=255&&o&&!(o&o-1)){for(s=o,o=0,s>>=1;s;s>>=1)o++;return s=t==parseInt(t)?t:24,a=n==parseInt(n)?n:8,Ie(88,String.fromCharCode(i)+String.fromCharCode(o)+String.fromCharCode(s)+String.fromCharCode(a))}if(4==(""+e).length)return Ie(88,e)}else{if(e==parseInt(e)&&t==parseInt(t)&&t&&!(t&t-1)){for(i=e,o=0,s=t,s>>=1;s;s>>=1)o++;return s=n==parseInt(n)?n:24,a=r==parseInt(r)?r:8,Ie(88,String.fromCharCode(i)+String.fromCharCode(o)+String.fromCharCode(s)+String.fromCharCode(a))}if(4==(""+e).length)return Ie(88,e)}throw RangeError("Wrong time signature: "+Ue(ze(e)))},smfKeySignature:function(e){var t=(e=""+e).match(/^\s*([A-H][b#]?)\s*(|maj|major|dur|m|min|minor|moll)\s*$/i);if(t){var n={CB:0,GB:1,DB:2,AB:3,EB:4,BB:5,F:6,C:7,G:8,D:9,A:10,E:11,B:12,H:12,"F#":13,"C#":14,"G#":15,"D#":16,"A#":17}[t[1].toUpperCase()],r={"":0,MAJ:0,MAJOR:0,DUR:0,M:1,MIN:1,MINOR:1,MOLL:1}[t[2].toUpperCase()];void 0!==n&&void 0!==r&&(r&&(n-=3),(n-=7)>=-7&&n<0?e=String.fromCharCode(256+n)+String.fromCharCode(r):n>=0&&n<=7&&(e=String.fromCharCode(n)+String.fromCharCode(r)))}if(2==e.length&&e.charCodeAt(1)<=1&&(e.charCodeAt(0)<=7||e.charCodeAt(0)<=255&&e.charCodeAt(0)>=249))return Ie(89,e);throw RangeError("Incorrect key signature: "+Ue(e))},smfSequencer:function(e){return Ie(127,ze(e))}};function qe(e,t,n){e.prototype[t]=function(){return this.send(n.apply(0,arguments)),this}}function Ee(e,t,n){e.prototype[t]=function(){return this.send(n.apply(0,[this._chan].concat(Array.prototype.slice.call(arguments)))),this}}function Le(e,t){ye[e]=function(){return new ye(t.apply(0,arguments))}}function Fe(e,t){ye[e]=function(){return t.apply(0,arguments)}}function Ne(e,t){Le(e,t),K.prototype[e]=function(){var e,n=Array.prototype.slice.call(arguments);n.length<t.length?n=[this._master].concat(n):(e=ke(ye.noteValue(n[0],n[0])),n[0]=this._master);var r=t.apply(0,n);return r.mpe=e,this.send(r),this}}for(o in Oe)Oe.hasOwnProperty(o)&&Le(o,Oe[o]);for(o in Pe)Pe.hasOwnProperty(o)&&Fe(o,Pe[o]);for(o in xe)xe.hasOwnProperty(o)&&Ne(o,xe[o]);function Re(e,t){for(o in Oe)Oe.hasOwnProperty(o)&&qe(e,o,Oe[o]);for(o in Pe)Pe.hasOwnProperty(o)&&qe(e,o,Pe[o]);for(o in xe)xe.hasOwnProperty(o)&&qe(e,o,xe[o]);if(t)for(o in xe)xe.hasOwnProperty(o)&&Ee(t,o,xe[o])}Re(B,U),K.prototype.noteOn=function(e,t){var n=ye.noteOn(this._master,e,t);return n._mpe=n[1],this.send(n),this},K.prototype.noteOff=function(e,t){var n=ye.noteOff(this._master,e,t);return n._mpe=n[1],this.send(n),this},K.prototype.aftertouch=function(e,t){var n=ye.aftertouch(this._master,e,t);return n._mpe=n[1],this.send(n),this};var Be,je={a:10,b:11,c:12,d:13,e:14,f:15,A:10,B:11,C:12,D:13,E:14,F:15};for(o=0;o<16;o++)je[o]=o;function De(e){for(var t=[],n=0;n<e.length;n++)t[n]=e.charCodeAt(n);return t}function ze(e){return e instanceof Array?function(e){for(var t="",n=0;n<e.length;n++)t+=String.fromCharCode(e[n]);return t}(e):void 0===e?"":""+e}function He(e){return(e<16?"0":"")+e.toString(16)}function Ve(e){for(var t=[],n=0;n<e.length;n++)t[n]=He(e[n]);return t.join(" ")}function Ge(e){return e.length?": "+Ve(De(e)):""}function Ue(e){return e.length?": "+function(e){for(var t="",n=0;n<e.length;n++)"\n"==e[n]?t+="\\n":"\r"==e[n]?t+="\\r":"\t"==e[n]?t+="\\t":e.charCodeAt(n)<32?t+="\\x"+He(e.charCodeAt(n)):t+=e[n];return t}(fe.lib.fromUTF8(e)):""}function Ke(){var e=this instanceof Ke?this:e=new Ke;return e.reset(),arguments.length&&Ke.prototype.setup.apply(e,arguments),e}function We(){if(!Be&&"undefined"!=typeof window){var e=window.AudioContext||window.webkitAudioContext;if(e){(Be=new e)&&!Be.createGain&&(Be.createGain=Be.createGainNode);var t=function(){if("running"!=Be.state){Be.resume();var e=Be.createOscillator(),n=Be.createGain();try{n.gain.value=0}catch(e){}n.gain.setTargetAtTime(0,Be.currentTime,.01),e.connect(n),n.connect(Be.destination),e.start||(e.start=e.noteOn),e.stop||(e.stop=e.noteOff),e.start(.1),e.stop(.11)}else document.removeEventListener("touchstart",t),document.removeEventListener("touchend",t),document.removeEventListener("mousedown",t),document.removeEventListener("keydown",t)};document.addEventListener("touchstart",t),document.addEventListener("touchend",t),document.addEventListener("mousedown",t),document.addEventListener("keydown",t),t()}}}ye.prototype.getChannel=function(){if(32==this.ff&&1==this.dd.length&&this.dd.charCodeAt(0)<16)return this.dd.charCodeAt(0);var e=this[0];return void 0===e||e<128||e>239?void 0:15&e},ye.prototype.setChannel=function(e){if(void 0===(e=je[e]))return this;if(32==this.ff)this.dd=String.fromCharCode(e);else{var t=this[0];void 0!==t&&t>=128&&t<=239&&(this[0]=240&t|e)}return this},ye.prototype.getNote=function(){var e=this[0];if(!(void 0===e||e<128||e>175))return this[1]},ye.prototype.setNote=function(e){var t=this[0];return void 0===t||t<128||t>175?this:(void 0!==(e=ye.noteValue(e))&&(this[1]=e),this)},ye.prototype.getVelocity=function(){var e=this[0];if(!(void 0===e||e<128||e>159))return this[2]},ye.prototype.setVelocity=function(e){var t=this[0];return void 0===t||t<128||t>159?this:((e=parseInt(e))>=0&&e<128&&(this[2]=e),this)},ye.prototype.getSysExChannel=function(){if(240==this[0])return this[2]},ye.prototype.setSysExChannel=function(e){return 240==this[0]&&this.length>2&&(e=parseInt(e))>=0&&e<128&&(this[2]=e),this},ye.prototype.getData=function(){if(void 0!==this.dd)return this.dd.toString()},ye.prototype.setData=function(e){return this.dd=ze(e),this},ye.prototype.getText=function(){if(void 0!==this.dd)return fe.lib.fromUTF8(this.dd)},ye.prototype.setText=function(e){return this.dd=fe.lib.toUTF8(e),this},ye.prototype.getTempo=function(){if(81==this.ff&&void 0!==this.dd)return 65536*this.dd.charCodeAt(0)+256*this.dd.charCodeAt(1)+this.dd.charCodeAt(2)},ye.prototype.getBPM=function(){var e=this.getTempo();if(e)return 6e7/e},ye.prototype.getTimeSignature=function(){if(88==this.ff&&void 0!==this.dd)return[this.dd.charCodeAt(0),1<<this.dd.charCodeAt(1)]},ye.prototype.getKeySignature=function(){if(89==this.ff&&void 0!==this.dd){var e=this.dd.charCodeAt(0),t=this.dd.charCodeAt(1);if(128&e&&(e-=256),e>=-7&&e<=7&&t>=0&&t<=1)return[e,["Cb","Gb","Db","Ab","Eb","Bb","F","C","G","D","A","E","B","F#","C#","G#","D#","A#"][t?e+10:e+7],!!t]}},ye.prototype.isNoteOn=function(){var e=this[0];return!(void 0===e||e<144||e>159)&&this[2]>0},ye.prototype.isNoteOff=function(){var e=this[0];return!(void 0===e||e<128||e>159)&&(e<144||0==this[2])},ye.prototype.isSysEx=function(){return 240==this[0]},ye.prototype.isFullSysEx=function(){return 240==this[0]&&247==this[this.length-1]},ye.prototype.isSMF=function(){return this.ff>=0&&this.ff<=127},ye.prototype.isEOT=function(){return 47==this.ff},ye.prototype.isTempo=function(){return 81==this.ff},ye.prototype.isTimeSignature=function(){return 88==this.ff},ye.prototype.isKeySignature=function(){return 89==this.ff},ye.prototype.toString=function(){var e,t;if(!this.length){if(void 0!==this.ff){if(e="ff"+He(this.ff)+" -- ",0==this.ff)e+="Sequence Number: "+function(e){for(var t=0,n=0;n<e.length;n++)t=(t<<8)+e.charCodeAt(n);return t}(this.dd);else if(this.ff>0&&this.ff<10)e+=["","Text","Copyright","Sequence Name","Instrument Name","Lyric","Marker","Cue Point","Program Name","Device Name"][this.ff]+Ue(this.dd);else if(32==this.ff)e+="Channel Prefix"+Ge(this.dd);else if(33==this.ff)e+="MIDI Port"+Ge(this.dd);else if(47==this.ff)e+="End of Track"+Ge(this.dd);else if(81==this.ff)e+="Tempo: "+Math.round(100*this.getBPM())/100+" bpm";else if(84==this.ff)e+="SMPTE Offset: "+we(De(this.dd));else if(88==this.ff){var n=1<<this.dd.charCodeAt(1);e+="Time Signature: "+this.dd.charCodeAt(0)+"/"+n,e+=" "+this.dd.charCodeAt(2)+" "+this.dd.charCodeAt(3)}else if(89==this.ff){e+="Key Signature: ";var r=this.getKeySignature();r?(e+=r[1],r[2]&&(e+=" min")):e+="invalid"}else 127==this.ff?e+="Sequencer Specific"+Ge(this.dd):e+="SMF"+Ge(this.dd);return e}return"empty"}if(e=Ve(this),this[0]<128)return e;if(t={241:"MIDI Time Code",242:"Song Position",243:"Song Select",244:"Undefined",245:"Undefined",246:"Tune request",248:"Timing clock",249:"Undefined",250:"Start",251:"Continue",252:"Stop",253:"Undefined",254:"Active Sensing",255:"Reset"}[this[0]])return e+" -- "+t;var i=this[0]>>4;return(t={8:"Note Off",10:"Aftertouch",12:"Program Change",13:"Channel Aftertouch",14:"Pitch Wheel"}[i])?e+" -- "+t:9==i?e+" -- "+(this[2]?"Note On":"Note Off"):11!=i?e:((t={0:"Bank Select MSB",1:"Modulation Wheel MSB",2:"Breath Controller MSB",4:"Foot Controller MSB",5:"Portamento Time MSB",6:"Data Entry MSB",7:"Channel Volume MSB",8:"Balance MSB",10:"Pan MSB",11:"Expression Controller MSB",12:"Effect Control 1 MSB",13:"Effect Control 2 MSB",16:"General Purpose Controller 1 MSB",17:"General Purpose Controller 2 MSB",18:"General Purpose Controller 3 MSB",19:"General Purpose Controller 4 MSB",32:"Bank Select LSB",33:"Modulation Wheel LSB",34:"Breath Controller LSB",36:"Foot Controller LSB",37:"Portamento Time LSB",38:"Data Entry LSB",39:"Channel Volume LSB",40:"Balance LSB",42:"Pan LSB",43:"Expression Controller LSB",44:"Effect control 1 LSB",45:"Effect control 2 LSB",48:"General Purpose Controller 1 LSB",49:"General Purpose Controller 2 LSB",50:"General Purpose Controller 3 LSB",51:"General Purpose Controller 4 LSB",64:"Damper Pedal On/Off",65:"Portamento On/Off",66:"Sostenuto On/Off",67:"Soft Pedal On/Off",68:"Legato Footswitch",69:"Hold 2",70:"Sound Controller 1",71:"Sound Controller 2",72:"Sound Controller 3",73:"Sound Controller 4",74:"Sound Controller 5",75:"Sound Controller 6",76:"Sound Controller 7",77:"Sound Controller 8",78:"Sound Controller 9",79:"Sound Controller 10",80:"General Purpose Controller 5",81:"General Purpose Controller 6",82:"General Purpose Controller 7",83:"General Purpose Controller 8",84:"Portamento Control",88:"High Resolution Velocity Prefix",91:"Effects 1 Depth",92:"Effects 2 Depth",93:"Effects 3 Depth",94:"Effects 4 Depth",95:"Effects 5 Depth",96:"Data Increment",97:"Data Decrement",98:"Non-Registered Parameter Number LSB",99:"Non-Registered Parameter Number MSB",100:"Registered Parameter Number LSB",101:"Registered Parameter Number MSB",120:"All Sound Off",121:"Reset All Controllers",122:"Local Control On/Off",123:"All Notes Off",124:"Omni Mode Off",125:"Omni Mode On",126:"Mono Mode On",127:"Poly Mode On"}[this[1]])||(t="Undefined"),e+" -- "+t)},ye.prototype._stamp=function(e){return this._from.push(e._orig?e._orig:e),this},ye.prototype._unstamp=function(e){if(void 0===e)this._from=[];else{e._orig&&(e=e._orig);var t=this._from.indexOf(e);t>-1&&this._from.splice(t,1)}return this},ye.prototype._stamped=function(e){e._orig&&(e=e._orig);for(var t=0;t<this._from.length;t++)if(this._from[t]==e)return!0;return!1},fe.MIDI=ye,Ke.validate=function(e){var t=e instanceof Array?e:arguments;if(t[0]!=parseInt(t[0])||t[0]<0||t[0]>14)throw RangeError("Bad master channel value: "+t[0]);if(t[1]!=parseInt(t[1])||t[1]<0||t[0]+t[1]>15)throw RangeError("Bad zone size value: "+t[1])},Ke.prototype.reset=function(){for(var e=0;e<16;e++)this[e]={band:0,master:e}},Ke.prototype.setup=function(e,t){var n;Ke.validate(e,t);var r=e+t;if((this[e].master!=e||this[e].band!=t)&&(t||this[e].band)){for(this[e].band?r<(n=e+this[e].band)&&(r=n):this[e].master==e-1?(n=e-1,r<(n+=this[n].band)&&(r=n),this[e-1]={band:0,master:e-1}):this[e].master!=e&&(n=this[e].master,r<(n+=this[n].band)&&(r=n),this[this[e].master].band=e-this[e].master-1),this[e].master=e,this[e].band=t,n=e+1;n<=e+t;n++)this[n].band&&r<n+this[n].band&&(r=n+this[n].band),this[n]={band:0,master:e};for(;n<=r;n++)this[n]={band:0,master:n}}},Ke.prototype.filter=function(e){var t=e.getChannel();if(!this[t]||!this[this[t].master].band)return e;var n,r,i,o=this[t].master,s=this[o].band;if(void 0!==e._mpe){for(i=256,n=o+1;n<=o+s;n++)if(this[n].notes){for(i>this[n].notes.length&&(t=n,i=this[n].notes.length),r=0;r<this[n].notes.length;r++)if(this[n].notes[r]==e._mpe){t=n,i=-1;break}}else i>0&&(t=n,i=0);e.setChannel(t),e._mpe=void 0}return t==o?e:(e.isNoteOn()?(this[t].notes||(this[t].notes=[]),A(this[t].notes,e.getNote())):e.isNoteOff()&&this[t].notes&&S(this[t].notes,e.getNote()),e)},fe.MPE=Ke,(fe.lib={}).now=f,fe.lib.schedule=l,fe.lib.openMidiOut=function(e,t){var n=new B;return t._openOut(n),n._info=t._info(e),n},fe.lib.openMidiIn=function(e,t){var n=new B;return t._openIn(n),n._info=t._info(e),n},fe.lib.registerMidiOut=function(e,t){for(var n=t._info(e),r=0;r<ee._outs.length;r++)if(ee._outs[r].name==n.name)return!1;return n.engine=t,ee._outs.push(n),T&&(P(),T._bad&&(T._repair(),T._resume())),!0},fe.lib.registerMidiIn=function(e,t){for(var n=t._info(e),r=0;r<ee._ins.length;r++)if(ee._ins[r].name==n.name)return!1;return n.engine=t,ee._ins.push(n),T&&(P(),T._bad&&(T._repair(),T._resume())),!0},fe.lib.copyMidiHelpers=Re,fe.lib.getAudioContext=function(){return We(),Be};var Je="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";fe.lib.fromBase64=function(e){var t,n,r,i,o,s,a="",u=0;for(e=e.replace(/[^A-Za-z0-9+/=]/g,"");u<e.length;)t=Je.indexOf(e.charAt(u++))<<2|(i=Je.indexOf(e.charAt(u++)))>>4,n=(15&i)<<4|(o=Je.indexOf(e.charAt(u++)))>>2,r=(3&o)<<6|(s=Je.indexOf(e.charAt(u++))),a+=String.fromCharCode(t),64!=o&&(a+=String.fromCharCode(n)),64!=s&&(a+=String.fromCharCode(r));return a},fe.lib.toBase64=function(e){var t,n,r,i,o,s=0,a=0,u="",h=[];if(!e)return e;do{t=(o=e.charCodeAt(s++)<<16|e.charCodeAt(s++)<<8|e.charCodeAt(s++))>>18&63,n=o>>12&63,r=o>>6&63,i=63&o,h[a++]=Je.charAt(t)+Je.charAt(n)+Je.charAt(r)+Je.charAt(i)}while(s<e.length);u=h.join("");var c=e.length%3;return c?u.slice(0,c-3)+"===".slice(c):u},fe.lib.fromUTF8=function(e){e=void 0===e?"":""+e;var t,n,r,i="";for(t=0;t<e.length;t++){if((n=e.charCodeAt(t))>255)return e;if(n<128)i+=e[t];else if(192==(224&n)){if(n=(31&n)<<6,++t>=e.length)return e;if(128!=(192&(r=e.charCodeAt(t))))return e;n+=63&r,i+=String.fromCharCode(n)}else if(224==(240&n)){if(n=(15&n)<<12,++t>=e.length)return e;if(128!=(192&(r=e.charCodeAt(t))))return e;if(n+=(63&r)<<6,++t>=e.length)return e;if(128!=(192&(r=e.charCodeAt(t))))return e;n+=63&r,i+=String.fromCharCode(n)}else if(240==(248&n)){if(n=(7&n)<<18,++t>=e.length)return e;if(128!=(192&(r=e.charCodeAt(t))))return e;if(n+=(63&r)<<12,++t>=e.length)return e;if(128!=(192&(r=e.charCodeAt(t))))return e;if(n+=(63&r)<<6,++t>=e.length)return e;if(128!=(192&(r=e.charCodeAt(t))))return e;if((n+=63&r)>1114111)return e;n-=65536,i+=String.fromCharCode(55296+(n>>10)),i+=String.fromCharCode(56320+(1023&n))}}return i},fe.lib.toUTF8=function(e){e=void 0===e?"":""+e;var t,n,r="";for(t=0;t<e.length;t++)(n=e.charCodeAt(t))<128?r+=e[t]:n<2048?(r+=String.fromCharCode(192+(n>>6)),r+=String.fromCharCode(128+(63&n))):n<65536?(r+=String.fromCharCode(224+(n>>12)),r+=String.fromCharCode(128+(n>>6&63)),r+=String.fromCharCode(128+(63&n))):(r+=String.fromCharCode(240+(n>>18)),r+=String.fromCharCode(128+(n>>12&63)),r+=String.fromCharCode(128+(n>>6&63)),r+=String.fromCharCode(128+(63&n)));return r};var Qe=[],Ze={},Ye={},Xe=u.Promise;function $e(e,t,n){this.name=e,this.message=t,this.code=n}function et(e,t){this.bubbles=!1,this.cancelBubble=!1,this.cancelable=!1,this.currentTarget=t,this.defaultPrevented=!1,this.eventPhase=0,this.path=[],this.port=e,this.returnValue=!0,this.srcElement=t,this.target=t,this.timeStamp=f(),this.type="statechange"}function tt(e,t){this.bubbles=!1,this.cancelBubble=!1,this.cancelable=!1,this.currentTarget=e,this.data=t,this.defaultPrevented=!1,this.eventPhase=0,this.path=[],this.receivedTime=f(),this.returnValue=!0,this.srcElement=e,this.target=e,this.timeStamp=this.receivedTime,this.type="midimessage"}function nt(e,t){e.onstatechange&&e.onstatechange(new et(e,e)),t.onstatechange&&t.onstatechange(new et(e,t))}function rt(e,t){var n=this,r=!1,i=null,o=null;this.type="input",this.id=t.id,this.name=t.name,this.manufacturer=t.man,this.version=t.ver,Object.defineProperty(this,"state",{get:function(){return t.connected?"connected":"disconnected"},enumerable:!0}),Object.defineProperty(this,"connection",{get:function(){return r?t.proxy?"open":"pending":"closed"},enumerable:!0}),Object.defineProperty(this,"onmidimessage",{get:function(){return o},set:function(e){e instanceof Function?(o=e,r||n.open()):o=null},enumerable:!0}),Object.defineProperty(this,"onstatechange",{get:function(){return i},set:function(e){i=e instanceof Function?e:null},enumerable:!0}),this.open=function(){return new Xe((function(i,o){r?i(n):t.open().then((function(){r||(r=!0,nt(n,e)),i(n)}),(function(){o(new $e("InvalidAccessError","Port is not available",15))}))}))},this.close=function(){return new Xe((function(i){r&&(r=!1,t.close(),nt(n,e)),i(n)}))},Object.freeze(this)}function it(e){for(var t,n;e.length;){for(t=0;t<e.length&&!(e[t]==parseInt(e[t])&&e[t]>=128&&e[t]<=255&&247!=e[t]);t++);if(e.splice(0,t),!e.length)return;if(240==e[0]){for(t=1;t<e.length&&247!=e[t];t++);if(t==e.length)return;return e.splice(0,t+1)}if((n=st(e[0])+1)>e.length)return;for(t=1;t<n&&!(e[t]!=parseInt(e[t])||e[t]<0||e[t]>=128);t++);if(t==n)return e.splice(0,t);e.splice(0,t)}}function ot(e,t,n,i){var o=this;this.id=e,this.name=t,this.man=n,this.ver=i,this.connected=!0,this.ports=[],this.pending=[],this.proxy=void 0,this.queue=[],this.onmidi=function(e){var t;for(o.queue=o.queue.concat(e.slice()),t=it(o.queue);t;t=it(o.queue))for(r=0;r<o.ports.length;r++)o.ports[r][0].onmidimessage&&(240!=t[0]||o.ports[r][1])&&o.ports[r][0].onmidimessage(new tt(o,new Uint8Array(t)))}}function st(e){return e>=128&&e<=191||e>=224&&e<=239||242==e?2:e>=192&&e<=223||241==e||243==e?1:0}"function"!=typeof Xe&&((Xe=function(e){this.executor=e}).prototype.then=function(e,t){"function"!=typeof e&&(e=function(){}),"function"!=typeof t&&(t=function(){}),this.executor(e,t)}),ot.prototype.open=function(){var e=this;return new Xe((function(t,n){var r;e.proxy||!e.connected?t():(e.pending.push([t,n]),1==e.pending.length&&fe().openMidiIn(e.name).or((function(){for(r=0;r<e.pending.length;r++)e.pending[r][1]();e.pending=[]})).and((function(){for(e.proxy=this,e.proxy.connect(e.onmidi),r=0;r<e.pending.length;r++)e.pending[r][0]();e.pending=[]})))}))},ot.prototype.close=function(){var e;if(this.proxy){for(e=0;e<this.ports.length;e++)if("open"==this.ports[e].connection)return;this.proxy.close(),this.proxy=void 0}},ot.prototype.disconnect=function(){this.connected=!1,this.proxy&&(this.proxy.close(),this.proxy=void 0)},ot.prototype.reconnect=function(){var e,t,n=this,r=[];for(this.connected=!0,e=0;e<Qe.length;e++)"closed"==(t=Qe[e].inputs.get(this.id)).connection?nt(t,Qe[e]):r.push([t,Qe[e]]);r.length&&fe()._openMidiInNR(n.name).or((function(){for(e=0;e<r.length;e++)r[e][0].close()})).and((function(){for(n.proxy=this,n.proxy.connect(n.onmidi),e=0;e<r.length;e++)nt(r[e][0],r[e][1])}))};var at="Failed to execute 'send' on 'MIDIOutput': ";function ut(e,t){var n=this,r=!1,i=null;this.type="output",this.id=t.id,this.name=t.name,this.manufacturer=t.man,this.version=t.ver,Object.defineProperty(this,"state",{get:function(){return t.connected?"connected":"disconnected"},enumerable:!0}),Object.defineProperty(this,"connection",{get:function(){return r?t.proxy?"open":"pending":"closed"},enumerable:!0}),Object.defineProperty(this,"onstatechange",{get:function(){return i},set:function(e){i=e instanceof Function?e:null},enumerable:!0}),this.open=function(){return new Xe((function(i,o){r?i(n):t.open().then((function(){r||(r=!0,nt(n,e)),i(n)}),(function(){o(new $e("InvalidAccessError","Port is not available",15))}))}))},this.close=function(){return new Xe((function(i){r&&(r=!1,n.clear(),t.close(),nt(n,e)),i(n)}))},this.clear=function(){},this.send=function(i,o){if(function(e,t){var n,r,i,o=[];for(n=0;n<e.length;n++)if(e[n]!=parseInt(e[n])||e[n]<0||e[n]>255)throw TypeError(at+e[n]+" is not a UInt8 value.");for(r=0,n=0;n<e.length;n++)if(r){if(e[n]>127)throw TypeError(at+"Unexpected status byte at index "+n+" ("+e[n]+").");i.push(e[n]),r--}else{if(e[n]<128)throw TypeError(at+"Running status is not allowed at index "+n+" ("+e[n]+").");if(247==e[n])throw TypeError(at+"Unexpected end of system exclusive message at index "+n+" ("+e[n]+").");if(i=[e[n]],o.push(i),240==e[n]){if(!t)throw new $e("InvalidAccessError",at+"System exclusive messag is not allowed at index "+n+" ("+e[n]+").",15);for(r=-1;n<e.length;n++)if(i.push(e[n]),247==e[n]){r=0;break}}else r=st(e[n])}if(r)throw TypeError(at+"Message is incomplete")}(i,e.sysexEnabled),!t.connected)throw new $e("InvalidStateError","Port is not connected",11);if(r){var s=f();o>s?setTimeout((function(){t.proxy.send(i)}),o-s):t.proxy.send(i)}else this.open().then((function(){n.send(i,o)}))},Object.freeze(this)}function ht(e,t,n,r){this.id=e,this.name=t,this.man=n,this.ver=r,this.connected=!0,this.ports=[],this.pending=[],this.proxy=void 0}function ct(e){this.has=function(t){return e.hasOwnProperty(t)&&e[t].connected},this.keys=function(){try{var t=new Map;for(var n in e)this.has(n)&&t.set(n,this.get(n));return t.keys()}catch(e){}},this.values=function(){try{var t=new Map;for(var n in e)this.has(n)&&t.set(n,this.get(n));return t.values()}catch(e){}},this.entries=function(){try{var t=new Map;for(var n in e)this.has(n)&&t.set(n,this.get(n));return t.entries()}catch(e){}},this.forEach=function(t,n){for(var r in void 0===n&&(n=this),e)this.has(r)&&t.call(n,this.get(r),r,this)},Object.defineProperty(this,"size",{get:function(){var t=0;for(var n in e)this.has(n)&&t++;return t},enumerable:!0})}function ft(e,t){this.get=function(n){if(Ye.hasOwnProperty(n)&&Ye[n].connected)return t[n]||(t[n]=new rt(e,Ye[n]),Ye[n].ports.push([t[n],e.sysexEnabled])),t[n]},Object.freeze(this)}function lt(e,t){this.get=function(n){if(Ze.hasOwnProperty(n)&&Ze[n].connected)return t[n]||(t[n]=new ut(e,Ze[n]),Ze[n].ports.push([t[n],e.sysexEnabled])),t[n]},Object.freeze(this)}function dt(e){var t,n,r,i;for(t=0;t<e.inputs.added.length;t++)r=e.inputs.added[t],Ye.hasOwnProperty(r.id)||(Ye[r.id]=new ot(r.id,r.name,r.manufacturer,r.version)),Ye[r.id].reconnect();for(t=0;t<e.outputs.added.length;t++)r=e.outputs.added[t],Ze.hasOwnProperty(r.id)||(Ze[r.id]=new ht(r.id,r.name,r.manufacturer,r.version)),Ze[r.id].reconnect();for(t=0;t<e.inputs.removed.length;t++)if(r=e.inputs.removed[t],Ye.hasOwnProperty(r.id)){for(i=[],n=0;n<Qe.length;n++)i.push([Qe[n].inputs.get(r.id),Qe[n]]);for(Ye[r.id].disconnect(),n=0;n<i.length;n++)nt(i[n][0],i[n][1])}for(t=0;t<e.outputs.removed.length;t++)if(r=e.outputs.removed[t],Ze.hasOwnProperty(r.id)){for(i=[],n=0;n<Qe.length;n++)i.push([Qe[n].outputs.get(r.id),Qe[n]]);for(Ze[r.id].disconnect(),n=0;n<i.length;n++)nt(i[n][0],i[n][1])}}function vt(e){var t,n,r=null;this.sysexEnabled=e,this.inputs=new ft(this,{}),this.outputs=new lt(this,{}),Object.defineProperty(this,"onstatechange",{get:function(){return r},set:function(e){r=e instanceof Function?e:null},enumerable:!0}),Object.freeze(this);var i=T._info;for(t=0;t<i.inputs.length;t++)n=i.inputs[t],Ye.hasOwnProperty(n.id)||(Ye[n.id]=new ot(n.id,n.name,n.manufacturer,n.version));for(t=0;t<i.outputs.length;t++)n=i.outputs[t],Ze.hasOwnProperty(n.id)||(Ze[n.id]=new ht(n.id,n.name,n.manufacturer,n.version));Qe.length||fe().onChange(dt),Qe.push(this)}return ht.prototype.open=function(){var e=this;return new Xe((function(t,n){var r;e.proxy||!e.connected?t():(e.pending.push([t,n]),1==e.pending.length&&fe().openMidiOut(e.name).or((function(){for(r=0;r<e.pending.length;r++)e.pending[r][1]();e.pending=[]})).and((function(){for(e.proxy=this,r=0;r<e.pending.length;r++)e.pending[r][0]();e.pending=[]})))}))},ht.prototype.close=function(){var e;if(this.proxy){for(e=0;e<this.ports.length;e++)if("open"==this.ports[e].connection)return;this.proxy.close(),this.proxy=void 0}},ht.prototype.disconnect=function(){this.connected=!1,this.proxy&&(this.proxy.close(),this.proxy=void 0)},ht.prototype.reconnect=function(){var e,t,n=this,r=[];for(this.connected=!0,e=0;e<Qe.length;e++)"closed"==(t=Qe[e].outputs.get(this.id)).connection?nt(t,Qe[e]):r.push([t,Qe[e]]);r.length&&fe()._openMidiOutNR(n.name).or((function(){for(e=0;e<r.length;e++)r[e][0].close()})).and((function(){for(n.proxy=this,e=0;e<r.length;e++)nt(r[e][0],r[e][1])}))},ft.prototype=new ct(Ye),ft.prototype.constructor=ft,lt.prototype=new ct(Ze),lt.prototype.constructor=lt,fe.requestMIDIAccess=function(e){return new Xe((function(t,n){fe.JZZ(e).or((function(){})).and((function(){var r=!(!e||!e.sysex);if(r&&!this.info().sysex)n(new $e("SecurityError","Sysex is not allowed",18));else{var i=new vt(r);t(i)}}))}))},"undefined"==typeof navigator||navigator.requestMIDIAccess||(navigator.requestMIDIAccess=fe.requestMIDIAccess),fe.close=function(){$._close&&$._close()},fe},e.exports=r()}).call(this,n(2))},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){(function(t){var r="./bin/",i=t.versions.node.split(".");0==i[0]&&i[1]<=10?r+="0_10/":0==i[0]&&i[1]<=12?r+="0_12/":i[0]<=4?r+="4_9/":i[0]<=5?r+="5_12/":i[0]<=6?r+="6_14/":i[0]<=7?r+="7_10/":i[0]<=8?r+="8_12/":i[0]<=9?r+="9_11/":i[0]<=10?r+="10_15/":i[0]<=11&&(r+="11_15/"),"win32"==t.platform&&"ia32"==t.arch?r+="win32/jazz":"win32"==t.platform&&"x64"==t.arch?r+="win64/jazz":"darwin"==t.platform&&"x64"==t.arch?r+="macos64/jazz":"darwin"==t.platform&&"ia32"==t.arch?r+="macos32/jazz":"linux"==t.platform&&"x64"==t.arch?r+="linux64/jazz":"linux"==t.platform&&"ia32"==t.arch?r+="linux32/jazz":"linux"==t.platform&&"arm"==t.arch&&(r+="linuxa7/jazz"),e.exports=n(5)(r),e.exports.package=n(6)}).call(this,n(4))},function(e,t){var n,r,i=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var u,h=[],c=!1,f=-1;function l(){c&&u&&(c=!1,u.length?h=u.concat(h):f=-1,h.length&&d())}function d(){if(!c){var e=a(l);c=!0;for(var t=h.length;t;){for(u=h,h=[];++f<t;)u&&u[f].run();f=-1,t=h.length}u=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function v(e,t){this.fun=e,this.array=t}function p(){}i.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];h.push(new v(e,t)),1!==h.length||c||a(d)},v.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=p,i.addListener=p,i.once=p,i.off=p,i.removeListener=p,i.removeAllListeners=p,i.emit=p,i.prependListener=p,i.prependOnceListener=p,i.listeners=function(e){return[]},i.binding=function(e){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(e){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=5},function(e){e.exports=JSON.parse('{"_args":[["jazz-midi@1.7.2","C:\\\\Users\\\\Tyler\\\\Desktop\\\\MTDemo"]],"_from":"jazz-midi@1.7.2","_id":"jazz-midi@1.7.2","_inBundle":false,"_integrity":"sha512-pBTGVBsyp7UgZnELes21nHkSyHp5r4AKdpR7B3LPhikT1QQ17o4zHISDKk3Xsoi9iIJRp/8rMzOMmxPVADQXnA==","_location":"/jazz-midi","_phantomChildren":{},"_requested":{"type":"version","registry":true,"raw":"jazz-midi@1.7.2","name":"jazz-midi","escapedName":"jazz-midi","rawSpec":"1.7.2","saveSpec":null,"fetchSpec":"1.7.2"},"_requiredBy":["/jzz","/jzz-synth-tiny/jzz"],"_resolved":"https://registry.npmjs.org/jazz-midi/-/jazz-midi-1.7.2.tgz","_spec":"1.7.2","_where":"C:\\\\Users\\\\Tyler\\\\Desktop\\\\MTDemo","author":{"name":"jazz-soft","url":"http://jazz-soft.net"},"bugs":{"url":"http://jazz-soft.org"},"contributors":[{"name":"sema","url":"http://jazz-soft.net"}],"description":"Low-level MIDI support for Node.js","homepage":"http://jazz-soft.net","keywords":["midi","MIDI","music","sound"],"license":"MIT","main":"index.js","name":"jazz-midi","repository":"","scripts":{"test":"node test.js"},"version":"1.7.2"}')},function(e,t,n){e.exports=function(e){if(e&&(e.synth||(e.synth={}),!e.synth.Tiny)){var t=e.lib.getAudioContext(),n={},r=[],i={_info:function(e){return e||(e="JZZ.synth.Tiny"),{type:"Web Audo",name:e,manufacturer:"virtual",version:"1.1.4"}},_openOut:function(e,s){var a;t?(void 0!==s?(n[s=""+s]||(n[s]=new o),a=n[s]):(a=new o,r.push(a)),a.setAudioContext(t),e.plug=function(e){e&&(e.context instanceof AudioContext||e.context instanceof webkitAudioContext)&&a.setAudioContext(e.context,e)},e._info=i._info(s),e._receive=function(e){a.send(e)},e._resume()):e._crash("AudioContext not supported")}};e.synth.Tiny=function(t){return e.lib.openMidiOut(t,i)},e.synth.Tiny.register=function(n){return!!t&&e.lib.registerMidiOut(n,i)},e.synth.Tiny.version=function(){return"1.1.4"}}function o(e){for(var t in this.__proto__=this.sy={is:"webaudio-tinysynth",properties:{masterVol:{type:Number,value:.5,observer:"setMasterVol"},reverbLev:{type:Number,value:.3,observer:"setReverbLev"},quality:{type:Number,value:1,observer:"setQuality"},debug:{type:Number,value:0},src:{type:String,value:null,observer:"loadMIDIUrl"},loop:{type:Number,value:0},tsmode:{type:Number,value:0},voices:{type:Number,value:64},useReverb:{type:Number,value:1}},program:[],drummap:[],program1:[[{w:"sine",v:.4,d:.7,r:.1},{w:"triangle",v:3,d:.7,s:.1,g:1,a:.01,k:-1.2}],[{w:"triangle",v:.4,d:.7,r:.1},{w:"triangle",v:4,t:3,d:.4,s:.1,g:1,k:-1,a:.01}],[{w:"sine",d:.7,r:.1},{w:"triangle",v:4,f:2,d:.5,s:.5,g:1,k:-1}],[{w:"sine",d:.7,v:.2},{w:"triangle",v:4,t:3,f:2,d:.3,g:1,k:-1,a:.01,s:.5}],[{w:"sine",v:.35,d:.7},{w:"sine",v:3,t:7,f:1,d:1,s:1,g:1,k:-.7}],[{w:"sine",v:.35,d:.7},{w:"sine",v:8,t:7,f:1,d:.5,s:1,g:1,k:-.7}],[{w:"sawtooth",v:.34,d:2},{w:"sine",v:8,f:.1,d:2,s:1,r:2,g:1}],[{w:"triangle",v:.34,d:1.5},{w:"square",v:6,f:.1,d:1.5,s:.5,r:2,g:1}],[{w:"sine",d:.3,r:.3},{w:"sine",v:7,t:11,d:.03,g:1}],[{w:"sine",d:.3,r:.3},{w:"sine",v:11,t:6,d:.2,s:.4,g:1}],[{w:"sine",v:.2,d:.3,r:.3},{w:"sine",v:11,t:5,d:.1,s:.4,g:1}],[{w:"sine",v:.2,d:.6,r:.6},{w:"triangle",v:11,t:5,f:1,s:.5,g:1}],[{w:"sine",v:.3,d:.2,r:.2},{w:"sine",v:6,t:5,d:.02,g:1}],[{w:"sine",v:.3,d:.2,r:.2},{w:"sine",v:7,t:11,d:.03,g:1}],[{w:"sine",v:.2,d:1,r:1},{w:"sine",v:11,t:3.5,d:1,r:1,g:1}],[{w:"triangle",v:.2,d:.5,r:.2},{w:"sine",v:6,t:2.5,d:.2,s:.1,r:.2,g:1}],[{w:"w9999",v:.22,s:.9},{w:"w9999",v:.22,t:2,f:2,s:.9}],[{w:"w9999",v:.2,s:1},{w:"sine",v:11,t:6,f:2,s:.1,g:1,h:.006,r:.002,d:.002},{w:"w9999",v:.2,t:2,f:1,h:0,s:1}],[{w:"w9999",v:.2,d:.1,s:.9},{w:"w9999",v:.25,t:4,f:2,s:.5}],[{w:"w9999",v:.3,a:.04,s:.9},{w:"w9999",v:.2,t:8,f:2,a:.04,s:.9}],[{w:"sine",v:.2,a:.02,d:.05,s:1},{w:"sine",v:6,t:3,f:1,a:.02,d:.05,s:1,g:1}],[{w:"triangle",v:.2,a:.02,d:.05,s:.8},{w:"square",v:7,t:3,f:1,d:.05,s:1.5,g:1}],[{w:"square",v:.2,a:.02,d:.2,s:.5},{w:"square",v:1,d:.03,s:2,g:1}],[{w:"square",v:.2,a:.02,d:.1,s:.8},{w:"square",v:1,a:.3,d:.1,s:2,g:1}],[{w:"sine",v:.3,d:.5,f:1},{w:"triangle",v:5,t:3,f:-1,d:1,s:.1,g:1}],[{w:"sine",v:.4,d:.6,f:1},{w:"triangle",v:12,t:3,d:.6,s:.1,g:1,f:-1}],[{w:"triangle",v:.3,d:1,f:1},{w:"triangle",v:6,f:-1,d:.4,s:.5,g:1,t:3}],[{w:"sine",v:.3,d:1,f:-1},{w:"triangle",v:11,f:1,d:.4,s:.5,g:1,t:3}],[{w:"sine",v:.4,d:.1,r:.01},{w:"sine",v:7,g:1}],[{w:"triangle",v:.4,d:1,f:1},{w:"square",v:4,f:-1,d:1,s:.7,g:1}],[{w:"triangle",v:.35,d:1,f:1},{w:"square",v:7,f:-1,d:.3,s:.5,g:1}],[{w:"sine",v:.2,t:1.5,a:.005,h:.2,d:.6},{w:"sine",v:11,t:5,f:2,d:1,s:.5,g:1}],[{w:"sine",d:.3},{w:"sine",v:4,t:3,d:1,s:1,g:1}],[{w:"sine",d:.3},{w:"sine",v:4,t:3,d:1,s:1,g:1}],[{w:"w9999",d:.3,v:.7,s:.5},{w:"sawtooth",v:1.2,d:.02,s:.5,g:1,h:0,r:.02}],[{w:"sine",d:.3},{w:"sine",v:4,t:3,d:1,s:1,g:1}],[{w:"triangle",v:.3,t:2,d:1},{w:"triangle",v:15,t:2.5,d:.04,s:.1,g:1}],[{w:"triangle",v:.3,t:2,d:1},{w:"triangle",v:15,t:2.5,d:.04,s:.1,g:1}],[{w:"triangle",d:.7},{w:"square",v:.4,t:.5,f:1,d:.2,s:10,g:1}],[{w:"triangle",d:.7},{w:"square",v:.4,t:.5,f:1,d:.2,s:10,g:1}],[{w:"sawtooth",v:.4,a:.1,d:11},{w:"sine",v:5,d:11,s:.2,g:1}],[{w:"sawtooth",v:.4,a:.1,d:11},{w:"sine",v:5,d:11,s:.2,g:1}],[{w:"sawtooth",v:.4,a:.1,d:11},{w:"sine",v:5,t:.5,d:11,s:.2,g:1}],[{w:"sawtooth",v:.4,a:.1,d:11},{w:"sine",v:5,t:.5,d:11,s:.2,g:1}],[{w:"sine",v:.4,a:.1,d:11},{w:"sine",v:6,f:2.5,d:.05,s:1.1,g:1}],[{w:"sine",v:.3,d:.1,r:.1},{w:"square",v:4,t:3,d:1,s:.2,g:1}],[{w:"sine",v:.3,d:.5,r:.5},{w:"sine",v:7,t:2,f:2,d:1,r:1,g:1}],[{w:"triangle",v:.6,h:.03,d:.3,r:.3,t:.5},{w:"n0",v:8,t:1.5,d:.08,r:.08,g:1}],[{w:"sawtooth",v:.3,a:.03,s:.5},{w:"sawtooth",v:.2,t:2,f:2,d:1,s:2}],[{w:"sawtooth",v:.3,f:-2,a:.03,s:.5},{w:"sawtooth",v:.2,t:2,f:2,d:1,s:2}],[{w:"sawtooth",v:.2,a:.02,s:1},{w:"sawtooth",v:.2,t:2,f:2,a:1,d:1,s:1}],[{w:"sawtooth",v:.2,a:.02,s:1},{w:"sawtooth",v:.2,f:2,a:.02,d:1,s:1}],[{w:"triangle",v:.3,a:.03,s:1},{w:"sine",v:3,t:5,f:1,d:1,s:1,g:1}],[{w:"sine",v:.4,a:.03,s:.9},{w:"sine",v:1,t:2,f:3,d:.03,s:.2,g:1}],[{w:"triangle",v:.6,a:.05,s:.5},{w:"sine",v:1,f:.8,d:.2,s:.2,g:1}],[{w:"square",v:.15,a:.01,d:.2,r:.2,t:.5,h:.03},{w:"square",v:4,f:.5,d:.2,r:11,a:.01,g:1,h:.02},{w:"square",v:.15,t:4,f:1,a:.02,d:.15,r:.15,h:.03},{g:3,w:"square",v:4,f:-.5,a:.01,h:.02,d:.15,r:11}],[{w:"square",v:.2,a:.01,d:1,s:.6,r:.04},{w:"sine",v:1,d:.1,s:4,g:1}],[{w:"square",v:.2,a:.02,d:1,s:.5,r:.08},{w:"sine",v:1,d:.1,s:4,g:1}],[{w:"square",v:.2,a:.04,d:1,s:.4,r:.08},{w:"sine",v:1,d:.1,s:4,g:1}],[{w:"square",v:.15,a:.04,s:1},{w:"sine",v:2,d:.1,g:1}],[{w:"square",v:.2,a:.02,d:1,s:.5,r:.08},{w:"sine",v:1,d:.1,s:4,g:1}],[{w:"square",v:.2,a:.02,d:1,s:.6,r:.08},{w:"sine",v:1,f:.2,d:.1,s:4,g:1}],[{w:"square",v:.2,a:.02,d:.5,s:.7,r:.08},{w:"sine",v:1,d:.1,s:4,g:1}],[{w:"square",v:.2,a:.02,d:1,s:.5,r:.08},{w:"sine",v:1,d:.1,s:4,g:1}],[{w:"square",v:.2,a:.02,d:2,s:.6},{w:"sine",v:2,d:1,g:1}],[{w:"square",v:.2,a:.02,d:2,s:.6},{w:"sine",v:2,d:1,g:1}],[{w:"square",v:.2,a:.02,d:1,s:.6},{w:"sine",v:2,d:1,g:1}],[{w:"square",v:.2,a:.02,d:1,s:.6},{w:"sine",v:2,d:1,g:1}],[{w:"sine",v:.4,a:.02,d:.7,s:.5},{w:"square",v:5,t:2,d:.2,s:.5,g:1}],[{w:"sine",v:.3,a:.05,d:.2,s:.8},{w:"sawtooth",v:6,f:.1,d:.1,s:.3,g:1}],[{w:"sine",v:.3,a:.03,d:.2,s:.4},{w:"square",v:7,f:.2,d:1,s:.1,g:1}],[{w:"square",v:.2,a:.05,d:.1,s:.8},{w:"square",v:4,d:.1,s:1.1,g:1}],[{w:"sine",a:.02,d:2},{w:"sine",v:6,t:2,d:.04,g:1}],[{w:"sine",v:.7,a:.03,d:.4,s:.4},{w:"sine",v:4,t:2,f:.2,d:.4,g:1}],[{w:"sine",v:.7,a:.02,d:.4,s:.6},{w:"sine",v:3,t:2,d:0,s:1,g:1}],[{w:"sine",v:.4,a:.06,d:.3,s:.3},{w:"sine",v:7,t:2,d:.2,s:.2,g:1}],[{w:"sine",a:.02,d:.3,s:.3},{w:"sawtooth",v:3,t:2,d:.3,g:1}],[{w:"sine",v:.4,a:.02,d:2,s:.1},{w:"sawtooth",v:8,t:2,f:1,d:.5,g:1}],[{w:"sine",v:.7,a:.03,d:.5,s:.3},{w:"sine",v:.003,t:0,f:4,d:.1,s:.002,g:1}],[{w:"sine",v:.7,a:.02,d:2},{w:"sine",v:1,t:2,f:1,d:.02,g:1}],[{w:"square",v:.3,d:1,s:.5},{w:"square",v:1,f:.2,d:1,s:.5,g:1}],[{w:"sawtooth",v:.3,d:2,s:.5},{w:"square",v:2,f:.1,s:.5,g:1}],[{w:"triangle",v:.5,a:.05,d:2,s:.6},{w:"sine",v:4,t:2,g:1}],[{w:"triangle",v:.3,a:.01,d:2,s:.3},{w:"sine",v:22,t:2,f:1,d:.03,s:.2,g:1}],[{w:"sawtooth",v:.3,d:1,s:.5},{w:"sine",v:11,t:11,a:.2,d:.05,s:.3,g:1}],[{w:"sine",v:.3,a:.06,d:1,s:.5},{w:"sine",v:7,f:1,d:1,s:.2,g:1}],[{w:"sawtooth",v:.3,a:.03,d:.7,s:.3,r:.2},{w:"sawtooth",v:.3,t:.75,d:.7,a:.1,s:.3,r:.2}],[{w:"triangle",v:.3,a:.01,d:.7,s:.5},{w:"square",v:5,t:.5,d:.7,s:.5,g:1}],[{w:"triangle",v:.3,a:.02,d:.3,s:.3,r:.3},{w:"square",v:3,t:4,f:1,a:.02,d:.1,s:1,g:1},{w:"triangle",v:.08,t:.5,a:.1,h:0,d:.1,s:.5,r:.1,b:0,c:0}],[{w:"sine",v:.3,a:.05,d:1,s:.7,r:.3},{w:"sine",v:2,f:1,d:.3,s:1,g:1}],[{w:"square",v:.3,a:.03,d:.5,s:.3,r:.1},{w:"square",v:4,f:1,a:.03,d:.1,g:1}],[{w:"triangle",v:.3,a:.08,d:1,s:.3,r:.1},{w:"square",v:2,f:1,d:.3,s:.3,g:1,t:4,a:.08}],[{w:"sine",v:.3,a:.05,d:1,s:.3,r:.1},{w:"sine",v:.1,t:2.001,f:1,d:1,s:50,g:1}],[{w:"triangle",v:.3,a:.03,d:.7,s:.3,r:.2},{w:"sine",v:12,t:7,f:1,d:.5,s:1.7,g:1}],[{w:"sine",v:.3,a:.05,d:1,s:.3,r:.1},{w:"sawtooth",v:22,t:6,d:.06,s:.3,g:1}],[{w:"triangle",v:.3,a:.05,d:11,r:.3},{w:"triangle",v:1,d:1,s:8,g:1}],[{w:"sawtooth",v:.3,d:4,s:.8,r:.1},{w:"square",v:1,t:2,f:8,a:1,d:1,s:1,r:.1,g:1}],[{w:"triangle",v:.3,d:1,s:.5,t:.8,a:.2,p:1.25,q:.2},{w:"sawtooth",v:.2,a:.2,d:.3,s:1,t:1.2,p:1.25,q:.2}],[{w:"sine",v:.3,d:1,s:.3},{w:"square",v:22,t:11,d:.5,s:.1,g:1}],[{w:"sawtooth",v:.3,a:.04,d:1,s:.8,r:.1},{w:"square",v:1,t:.5,d:1,s:2,g:1}],[{w:"triangle",v:.3,d:1,s:.3},{w:"sine",v:22,t:6,d:.6,s:.05,g:1}],[{w:"sine",v:.6,a:.1,d:.05,s:.4},{w:"sine",v:5,t:5,f:1,d:.05,s:.3,g:1}],[{w:"sine",a:.1,d:.05,s:.4,v:.8},{w:"sine",v:5,t:5,f:1,d:.05,s:.3,g:1}],[{w:"square",v:.3,a:.1,d:.1,s:.4},{w:"square",v:1,f:1,d:.3,s:.1,g:1}],[{w:"sawtooth",v:.3,d:.5,r:.5},{w:"sawtooth",v:11,t:5,d:.05,g:1}],[{w:"square",v:.3,d:.2,r:.2},{w:"square",v:7,t:3,d:.05,g:1}],[{w:"triangle",d:.2,r:.2},{w:"square",v:9,t:3,d:.1,r:.1,g:1}],[{w:"triangle",d:.3,r:.3},{w:"square",v:6,t:3,d:1,r:1,g:1}],[{w:"triangle",v:.4,d:.2,r:.2},{w:"square",v:22,t:12,d:.1,r:.1,g:1}],[{w:"sine",v:.25,a:.02,d:.05,s:.8},{w:"square",v:1,t:2,d:.03,s:11,g:1}],[{w:"sine",v:.3,a:.05,d:11},{w:"square",v:7,t:3,f:1,s:.7,g:1}],[{w:"square",v:.3,a:.05,d:.1,s:.8},{w:"square",v:4,d:.1,s:1.1,g:1}],[{w:"sine",v:.4,d:.3,r:.3},{w:"sine",v:7,t:9,d:.1,r:.1,g:1}],[{w:"sine",v:.7,d:.1,r:.1},{w:"sine",v:22,t:7,d:.05,g:1}],[{w:"sine",v:.6,d:.15,r:.15},{w:"square",v:11,t:3.2,d:.1,r:.1,g:1}],[{w:"sine",v:.8,d:.07,r:.07},{w:"square",v:11,t:7,r:.01,g:1}],[{w:"triangle",v:.7,t:.5,d:.2,r:.2,p:.95},{w:"n0",v:9,g:1,d:.2,r:.2}],[{w:"sine",v:.7,d:.1,r:.1,p:.9},{w:"square",v:14,t:2,d:.005,r:.005,g:1}],[{w:"square",d:.15,r:.15,p:.5},{w:"square",v:4,t:5,d:.001,r:.001,g:1}],[{w:"n1",v:.3,a:1,s:1,d:.15,r:0,t:.5}],[{w:"sine",t:12.5,d:0,r:0,p:.5,v:.3,h:.2,q:.5},{g:1,w:"sine",v:1,t:2,d:0,r:0,s:1},{g:1,w:"n0",v:.2,t:2,a:.6,h:0,d:.1,r:.1,b:0,c:0}],[{w:"n0",v:.2,a:.05,h:.02,d:.02,r:.02}],[{w:"n0",v:.4,a:1,d:1,t:.25}],[{w:"sine",v:.3,a:.1,d:1,s:.5},{w:"sine",v:4,t:0,f:1.5,d:1,s:1,r:.1,g:1},{g:1,w:"sine",v:4,t:0,f:2,a:.6,h:0,d:.1,s:1,r:.1,b:0,c:0}],[{w:"square",v:.3,t:.25,d:11,s:1},{w:"square",v:12,t:0,f:8,d:1,s:1,r:11,g:1}],[{w:"n0",v:.4,t:.5,a:1,d:11,s:1,r:.5},{w:"square",v:1,t:0,f:14,d:1,s:1,r:11,g:1}],[{w:"sine",t:0,f:1221,a:.2,d:1,r:.25,s:1},{g:1,w:"n0",v:3,t:.5,d:1,s:1,r:1}],[{w:"sine",d:.4,r:.4,p:.1,t:2.5,v:1},{w:"n0",v:12,t:2,d:1,r:1,g:1}]],program0:[[{w:"triangle",v:.5,d:.7}],[{w:"triangle",v:.5,d:.7}],[{w:"triangle",v:.5,d:.7}],[{w:"triangle",v:.5,d:.7}],[{w:"triangle",v:.5,d:.7}],[{w:"triangle",v:.5,d:.7}],[{w:"sawtooth",v:.3,d:.7}],[{w:"sawtooth",v:.3,d:.7}],[{w:"sine",v:.5,d:.3,r:.3}],[{w:"triangle",v:.5,d:.3,r:.3}],[{w:"square",v:.2,d:.3,r:.3}],[{w:"square",v:.2,d:.3,r:.3}],[{w:"sine",v:.5,d:.1,r:.1}],[{w:"sine",v:.5,d:.1,r:.1}],[{w:"square",v:.2,d:1,r:1}],[{w:"sawtooth",v:.3,d:.7,r:.7}],[{w:"sine",v:.5,a:.01,s:1}],[{w:"sine",v:.7,d:.02,s:.7}],[{w:"square",v:.2,s:1}],[{w:"triangle",v:.5,a:.01,s:1}],[{w:"square",v:.2,a:.02,s:1}],[{w:"square",v:.2,a:.02,s:1}],[{w:"square",v:.2,a:.02,s:1}],[{w:"square",v:.2,a:.05,s:1}],[{w:"triangle",v:.5,d:.5}],[{w:"square",v:.2,d:.6}],[{w:"square",v:.2,d:.6}],[{w:"triangle",v:.8,d:.6}],[{w:"triangle",v:.4,d:.05}],[{w:"square",v:.2,d:1}],[{w:"square",v:.2,d:1}],[{w:"sine",v:.4,d:.6}],[{w:"triangle",v:.7,d:.4}],[{w:"triangle",v:.7,d:.7}],[{w:"triangle",v:.7,d:.7}],[{w:"triangle",v:.7,d:.7}],[{w:"square",v:.3,d:.2}],[{w:"square",v:.3,d:.2}],[{w:"square",v:.3,d:.1,s:.2}],[{w:"sawtooth",v:.4,d:.1,s:.2}],[{w:"sawtooth",v:.2,a:.02,s:1}],[{w:"sawtooth",v:.2,a:.02,s:1}],[{w:"sawtooth",v:.2,a:.02,s:1}],[{w:"sawtooth",v:.2,a:.02,s:1}],[{w:"sawtooth",v:.2,a:.02,s:1}],[{w:"sawtooth",v:.3,d:.1}],[{w:"sawtooth",v:.3,d:.5,r:.5}],[{w:"triangle",v:.6,d:.1,r:.1,h:.03,p:.8}],[{w:"sawtooth",v:.2,a:.02,s:1}],[{w:"sawtooth",v:.2,a:.02,s:1}],[{w:"sawtooth",v:.2,a:.02,s:1}],[{w:"sawtooth",v:.2,a:.02,s:1}],[{w:"triangle",v:.3,a:.03,s:1}],[{w:"sine",v:.3,a:.03,s:1}],[{w:"triangle",v:.3,a:.05,s:1}],[{w:"sawtooth",v:.5,a:.01,d:.1}],[{w:"square",v:.3,a:.05,d:.2,s:.6}],[{w:"square",v:.3,a:.05,d:.2,s:.6}],[{w:"square",v:.3,a:.05,d:.2,s:.6}],[{w:"square",v:.2,a:.05,d:.01,s:1}],[{w:"square",v:.3,a:.05,s:1}],[{w:"square",v:.3,s:.7}],[{w:"square",v:.3,s:.7}],[{w:"square",v:.3,s:.7}],[{w:"square",v:.3,a:.02,d:2}],[{w:"square",v:.3,a:.02,d:2}],[{w:"square",v:.3,a:.03,d:2}],[{w:"square",v:.3,a:.04,d:2}],[{w:"square",v:.3,a:.02,d:2}],[{w:"square",v:.3,a:.05,d:2}],[{w:"square",v:.3,a:.03,d:2}],[{w:"square",v:.3,a:.03,d:2}],[{w:"sine",v:.7,a:.02,d:2}],[{w:"sine",v:.7,a:.02,d:2}],[{w:"sine",v:.7,a:.02,d:2}],[{w:"sine",v:.7,a:.02,d:2}],[{w:"sine",v:.7,a:.02,d:2}],[{w:"sine",v:.7,a:.02,d:2}],[{w:"sine",v:.7,a:.02,d:2}],[{w:"sine",v:.7,a:.02,d:2}],[{w:"square",v:.3,s:.7}],[{w:"sawtooth",v:.4,s:.7}],[{w:"triangle",v:.5,s:.7}],[{w:"sawtooth",v:.4,s:.7}],[{w:"sawtooth",v:.4,d:12}],[{w:"sine",v:.4,a:.06,d:12}],[{w:"sawtooth",v:.4,d:12}],[{w:"sawtooth",v:.4,d:12}],[{w:"sawtooth",v:.3,d:12}],[{w:"triangle",v:.5,d:12}],[{w:"square",v:.3,d:12}],[{w:"triangle",v:.5,a:.08,d:11}],[{w:"sawtooth",v:.5,a:.05,d:11}],[{w:"sawtooth",v:.5,d:11}],[{w:"triangle",v:.5,d:11}],[{w:"triangle",v:.5,d:11}],[{w:"triangle",v:.5,d:11}],[{w:"triangle",v:.5,d:11}],[{w:"square",v:.3,d:11}],[{w:"sawtooth",v:.5,a:.04,d:11}],[{w:"sawtooth",v:.5,d:11}],[{w:"triangle",v:.5,a:.8,d:11}],[{w:"triangle",v:.5,d:11}],[{w:"square",v:.3,d:11}],[{w:"sawtooth",v:.3,d:1,r:1}],[{w:"sawtooth",v:.5,d:.3}],[{w:"sawtooth",v:.5,d:.3,r:.3}],[{w:"sawtooth",v:.5,d:.3,r:.3}],[{w:"square",v:.3,d:.2,r:.2}],[{w:"square",v:.3,a:.02,d:2}],[{w:"sawtooth",v:.2,a:.02,d:.7}],[{w:"triangle",v:.5,d:1}],[{w:"sawtooth",v:.3,d:.3,r:.3}],[{w:"sine",v:.8,d:.1,r:.1}],[{w:"square",v:.2,d:.1,r:.1,p:1.05}],[{w:"sine",v:.8,d:.05,r:.05}],[{w:"triangle",v:.5,d:.1,r:.1,p:.96}],[{w:"triangle",v:.5,d:.1,r:.1,p:.97}],[{w:"square",v:.3,d:.1,r:.1}],[{w:"n1",v:.3,a:1,s:1,d:.15,r:0,t:.5}],[{w:"triangle",v:.5,d:.03,t:0,f:1332,r:.001,p:1.1}],[{w:"n0",v:.2,t:.1,d:.02,a:.05,h:.02,r:.02}],[{w:"n0",v:.4,a:1,d:1,t:.25}],[{w:"sine",v:.3,a:.8,d:1,t:0,f:1832}],[{w:"triangle",d:.5,t:0,f:444,s:1}],[{w:"n0",v:.4,d:1,t:0,f:22,s:1}],[{w:"n0",v:.5,a:.2,d:11,t:0,f:44}],[{w:"n0",v:.5,t:.25,d:.4,r:.4}]],drummap1:[[{w:"triangle",t:0,f:70,v:1,d:.05,h:.03,p:.9,q:.1},{w:"n0",g:1,t:6,v:17,r:.01,h:0,p:0}],[{w:"triangle",t:0,f:88,v:1,d:.05,h:.03,p:.5,q:.1},{w:"n0",g:1,t:5,v:42,r:.01,h:0,p:0}],[{w:"n0",f:222,p:0,t:0,r:.01,h:0}],[{w:"triangle",v:.3,f:180,d:.05,t:0,h:.03,p:.9,q:.1},{w:"n0",v:.6,t:0,f:70,h:.02,r:.01,p:0},{g:1,w:"square",v:2,t:0,f:360,r:.01,b:0,c:0}],[{w:"square",f:1150,v:.34,t:0,r:.03,h:.025,d:.03},{g:1,w:"n0",t:0,f:13,h:.025,d:.1,s:1,r:.1,v:1}],[{w:"triangle",f:200,v:1,d:.06,t:0,r:.06},{w:"n0",g:1,t:0,f:400,v:12,r:.02,d:.02}],[{w:"triangle",f:100,v:.9,d:.12,h:.02,p:.5,t:0,r:.12},{g:1,w:"n0",v:5,t:.4,h:.015,d:.005,r:.005}],[{w:"n1",f:390,v:.25,r:.01,t:0}],[{w:"triangle",f:120,v:.9,d:.12,h:.02,p:.5,t:0,r:.12},{g:1,w:"n0",v:5,t:.5,h:.015,d:.005,r:.005}],[{w:"n1",v:.25,f:390,r:.03,t:0,h:.005,d:.03}],[{w:"triangle",f:140,v:.9,d:.12,h:.02,p:.5,t:0,r:.12},{g:1,w:"n0",v:5,t:.3,h:.015,d:.005,r:.005}],[{w:"n1",v:.25,f:390,t:0,d:.2,r:.2},{w:"n0",v:.3,t:0,c:0,f:440,h:.005,d:.05}],[{w:"triangle",f:155,v:.9,d:.12,h:.02,p:.5,t:0,r:.12},{g:1,w:"n0",v:5,t:.3,h:.015,d:.005,r:.005}],[{w:"triangle",f:180,v:.9,d:.12,h:.02,p:.5,t:0,r:.12},{g:1,w:"n0",v:5,t:.3,h:.015,d:.005,r:.005}],[{w:"n1",v:.3,f:1200,d:.2,r:.2,h:.05,t:0},{w:"n1",t:0,v:1,d:.1,r:.1,p:1.2,f:440}],[{w:"triangle",f:220,v:.9,d:.12,h:.02,p:.5,t:0,r:.12},{g:1,w:"n0",v:5,t:.3,h:.015,d:.005,r:.005}],[{w:"n1",f:500,v:.15,d:.4,r:.4,h:0,t:0},{w:"n0",v:.1,t:0,r:.01,f:440}],[{w:"n1",v:.3,f:800,d:.2,r:.2,h:.05,t:0},{w:"square",t:0,v:1,d:.1,r:.1,p:.1,f:220,g:1}],[{w:"sine",f:1651,v:.15,d:.2,r:.2,h:0,t:0},{w:"sawtooth",g:1,t:1.21,v:7.2,d:.1,r:11,h:1},{g:1,w:"n0",v:3.1,t:.152,d:.002,r:.002}],null,[{w:"n1",v:.3,f:1200,d:.2,r:.2,h:.05,t:0},{w:"n1",t:0,v:1,d:.1,r:.1,p:1.2,f:440}],null,[{w:"n1",v:.3,f:555,d:.25,r:.25,h:.05,t:0},{w:"n1",t:0,v:1,d:.1,r:.1,f:440,a:.005,h:.02}],[{w:"sawtooth",f:776,v:.2,d:.3,t:0,r:.3},{g:1,w:"n0",v:2,t:0,f:776,a:.005,h:.02,d:.1,s:1,r:.1,c:0},{g:11,w:"sine",v:.1,t:0,f:22,d:.3,r:.3,b:0,c:0}],[{w:"n1",f:440,v:.15,d:.4,r:.4,h:0,t:0},{w:"n0",v:.4,t:0,r:.01,f:440}],null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,null,[{w:"sine",f:1720,v:.3,d:.02,t:0,r:.02},{w:"square",g:1,t:0,f:2876,v:6,d:.2,s:1,r:.2}],[{w:"sine",f:1720,v:.3,d:.25,t:0,r:.25},{w:"square",g:1,t:0,f:2876,v:6,d:.2,s:1,r:.2}]],drummap0:[[{w:"triangle",t:0,f:110,v:1,d:.05,h:.02,p:.1}],[{w:"triangle",t:0,f:150,v:.8,d:.1,p:.1,h:.02,r:.01}],[{w:"n0",f:392,v:.5,d:.01,p:0,t:0,r:.05}],[{w:"n0",f:33,d:.05,t:0}],[{w:"n0",f:100,v:.7,d:.03,t:0,r:.03,h:.02}],[{w:"n0",f:44,v:.7,d:.02,p:.1,t:0,h:.02}],[{w:"triangle",f:240,v:.9,d:.1,h:.02,p:.1,t:0}],[{w:"n0",f:440,v:.2,r:.01,t:0}],[{w:"triangle",f:270,v:.9,d:.1,h:.02,p:.1,t:0}],[{w:"n0",f:440,v:.2,d:.04,r:.04,t:0}],[{w:"triangle",f:300,v:.9,d:.1,h:.02,p:.1,t:0}],[{w:"n0",f:440,v:.2,d:.1,r:.1,h:.02,t:0}],[{w:"triangle",f:320,v:.9,d:.1,h:.02,p:.1,t:0}],[{w:"triangle",f:360,v:.9,d:.1,h:.02,p:.1,t:0}],[{w:"n0",f:150,v:.2,d:.1,r:.1,h:.05,t:0,p:.1}],[{w:"triangle",f:400,v:.9,d:.1,h:.02,p:.1,t:0}],[{w:"n0",f:150,v:.2,d:.1,r:.01,h:.05,t:0,p:.1}],[{w:"n0",f:150,v:.2,d:.1,r:.01,h:.05,t:0,p:.1}],[{w:"n0",f:440,v:.3,d:.1,p:.9,t:0,r:.1}],[{w:"n0",f:200,v:.2,d:.05,p:.9,t:0}],[{w:"n0",f:440,v:.3,d:.12,p:.9,t:0}],[{w:"sine",f:800,v:.4,d:.06,t:0}],[{w:"n0",f:150,v:.2,d:.1,r:.01,h:.05,t:0,p:.1}],[{w:"n0",f:33,v:.3,d:.2,p:.9,t:0}],[{w:"n0",f:300,v:.3,d:.14,p:.9,t:0}],[{w:"sine",f:200,d:.06,t:0}],[{w:"sine",f:150,d:.06,t:0}],[{w:"sine",f:300,t:0}],[{w:"sine",f:300,d:.06,t:0}],[{w:"sine",f:250,d:.06,t:0}],[{w:"square",f:300,v:.3,d:.06,p:.8,t:0}],[{w:"square",f:260,v:.3,d:.06,p:.8,t:0}],[{w:"sine",f:850,v:.5,d:.07,t:0}],[{w:"sine",f:790,v:.5,d:.07,t:0}],[{w:"n0",f:440,v:.3,a:.05,t:0}],[{w:"n0",f:440,v:.3,a:.05,t:0}],[{w:"triangle",f:1800,v:.4,p:.9,t:0,h:.03}],[{w:"triangle",f:1800,v:.3,p:.9,t:0,h:.13}],[{w:"n0",f:330,v:.3,a:.02,t:0,r:.01}],[{w:"n0",f:330,v:.3,a:.02,t:0,h:.04,r:.01}],[{w:"n0",f:440,v:.3,t:0}],[{w:"sine",f:800,t:0}],[{w:"sine",f:700,t:0}],[{w:"n0",f:330,v:.3,t:0}],[{w:"n0",f:330,v:.3,t:0,h:.1,r:.01,p:.7}],[{w:"sine",t:0,f:1200,v:.3,r:.01}],[{w:"sine",t:0,f:1200,v:.3,d:.2,r:.2}]],ready:function(){this.pg=[],this.vol=[],this.ex=[],this.bend=[],this.rpnidx=[],this.brange=[],this.sustain=[],this.notetab=[],this.rhythm=[],this.maxTick=0,this.playTick=0,this.playing=0,this.releaseRatio=3.5;for(var e=0;e<16;++e)this.pg[e]=0,this.vol[e]=3e4/16129,this.bend[e]=0,this.brange[e]=256,this.rhythm[e]=0;this.rhythm[9]=1,this.preroll=.2,this.relcnt=0,setInterval(function(){if(++this.relcnt>=3){this.relcnt=0;for(var e=this.notetab.length-1;e>=0;--e){var t=this.notetab[e];this.actx.currentTime>t.e&&(this._pruneNote(t),this.notetab.splice(e,1))}}if(this.playing&&this.song.ev.length>0)for(var n=this.song.ev[this.playIndex];this.actx.currentTime+this.preroll>this.playTime;)if(65361==n.m[0]?(this.song.tempo=n.m[1],this.tick2Time=240/this.song.tempo/this.song.timebase):this.send(n.m,this.playTime),++this.playIndex,this.playIndex>=this.song.ev.length){if(!this.loop){this.playTick=this.maxTick,this.playing=0;break}n=this.song.ev[this.playIndex=0],this.playTick=n.t}else n=this.song.ev[this.playIndex],this.playTime+=(n.t-this.playTick)*this.tick2Time,this.playTick=n.t}.bind(this),60),this.isReady=1},setMasterVol:function(e){null!=e&&(this.masterVol=e),this.out&&(this.out.gain.value=this.masterVol)},setReverbLev:function(e){null!=e&&(this.reverbLev=e);var t=parseFloat(this.reverbLev);this.rev&&!isNaN(t)&&(this.rev.gain.value=8*t)},setLoop:function(e){this.loop=e},setVoices:function(e){this.voices=e},reset:function(){for(var e=0;e<16;++e)this.setProgram(e,0),this.setBendRange(e,256),this.setModulation(e,0),this.setChVol(e,100),this.setPan(e,64),this.resetAllControllers(e),this.allSoundOff(e),this.rhythm[e]=0;this.rhythm[9]=1},setQuality:function(e){var t;for(null!=e&&(this.quality=e),t=0;t<128;++t)this.setTimbre(0,t,this.program0[t]);for(t=0;t<this.drummap0.length;++t)this.setTimbre(1,t+35,this.drummap0[t]);if(this.quality){for(t=0;t<this.program1.length;++t)this.setTimbre(0,t,this.program1[t]);for(t=0;t<this.drummap.length;++t)this.drummap1[t]&&this.setTimbre(1,t+35,this.drummap1[t])}},setTimbre:function(e,n,r){var i={g:0,w:"sine",t:1,f:0,v:.5,a:0,h:.01,d:.01,s:0,r:.05,p:1,q:1,k:0};function o(e){for(n=0;n<e.length;++n)for(t in i)e[n].hasOwnProperty(t)&&void 0!==e[n][t]||(e[n][t]=i[t]);return e}e&&n>=35&&n<=81&&(this.drummap[n-35]=o(r)),0==e&&n>=0&&n<=127&&(this.program[n]=o(r))},_pruneNote:function(e){for(var t=e.o.length-1;t>=0;--t){if(e.o[t].frequency?e.o[t].frequency.cancelScheduledValues(0):e.o[t].playbackRate.cancelScheduledValues(0),e.g[t].gain.cancelScheduledValues(0),e.o[t].stop(),e.o[t].detune)try{this.chmod[e.ch].disconnect(e.o[t].detune)}catch(e){}e.g[t].gain.value=0}},_limitVoices:function(e,t){this.notetab.sort((function(e,t){return e.f!=t.f?e.f-t.f:e.e!=t.e?t.e-e.e:t.t-e.t}));for(var n=this.notetab.length-1;n>=0;--n){var r=this.notetab[n];(this.actx.currentTime>r.e||n>=this.voices-1)&&(this._pruneNote(r),this.notetab.splice(n,1))}},_note:function(e,t,n,r,i){var o,s,a,u=[],h=[],c=[],f=[],l=[],d=440*Math.pow(2,(n-69)/12);this._limitVoices(t,n);for(var v=0;v<i.length;++v){var p=e+(a=i[v]).a+a.h;switch(0==a.g?(o=this.chvol[t],s=r*r/16384,f[v]=d*a.t+a.f):a.g>10?(o=h[a.g-11].gain,s=1,f[v]=f[a.g-11]*a.t+a.f):u[a.g-1].frequency?(o=u[a.g-1].frequency,s=f[a.g-1],f[v]=f[a.g-1]*a.t+a.f):(o=u[a.g-1].playbackRate,s=f[a.g-1]/440,f[v]=f[a.g-1]*a.t+a.f),a.w[0]){case"n":u[v]=this.actx.createBufferSource(),u[v].buffer=this.noiseBuf[a.w],u[v].loop=!0,u[v].playbackRate.value=f[v]/440,1!=a.p&&this._setParamTarget(u[v].playbackRate,f[v]/440*a.p,e,a.q),this.chmod[t].connect(u[v].detune),u[v].detune.value=this.bend[t];break;default:u[v]=this.actx.createOscillator(),u[v].frequency.value=f[v],1!=a.p&&this._setParamTarget(u[v].frequency,f[v]*a.p,e,a.q),"w"==a.w[0]?u[v].setPeriodicWave(this.wave[a.w]):u[v].type=a.w,this.chmod[t].connect(u[v].detune),u[v].detune.value=this.bend[t]}h[v]=this.actx.createGain(),l[v]=a.r,u[v].connect(h[v]),h[v].connect(o),c[v]=s*a.v,a.k&&(c[v]*=Math.pow(2,(n-60)/12*a.k)),a.a?(h[v].gain.value=0,h[v].gain.setValueAtTime(0,e),h[v].gain.linearRampToValueAtTime(c[v],e+a.a)):h[v].gain.setValueAtTime(c[v],e),this._setParamTarget(h[v].gain,a.s*c[v],p,a.d),u[v].start(e),this.rhythm[t]&&(u[v].onended=function(e,t){return function(){e.disconnect(t)}}(this.chmod[t],u[v].detune),u[v].stop(e+i[0].d*this.releaseRatio))}this.rhythm[t]||this.notetab.push({t:e,e:99999,ch:t,n:n,o:u,g:h,t2:e+a.a,v:c,r:l,f:0})},_setParamTarget:function(e,t,n,r){0!=r?e.setTargetAtTime(t,n,r):e.setValueAtTime(t,n)},_releaseNote:function(e,t){if(9!=e.ch)for(var n=e.g.length-1;n>=0;--n)e.g[n].gain.cancelScheduledValues(t),t==e.t2?e.g[n].gain.setValueAtTime(e.v[n],t):t<e.t2&&e.g[n].gain.setValueAtTime(e.v[n]*(t-e.t)/(e.t2-e.t),t),this._setParamTarget(e.g[n].gain,0,t,e.r[n]);e.e=t+e.r[0]*this.releaseRatio,e.f=1},setModulation:function(e,t,n){this.chmod[e].gain.setValueAtTime(100*t/127,this._tsConv(n))},setChVol:function(e,t,n){this.vol[e]=3*t*t/16129,this.chvol[e].gain.setValueAtTime(this.vol[e]*this.ex[e],this._tsConv(n))},setPan:function(e,t,n){this.chpan[e]&&this.chpan[e].pan.setValueAtTime((t-64)/64,this._tsConv(n))},setExpression:function(e,t,n){this.ex[e]=t*t/16129,this.chvol[e].gain.setValueAtTime(this.vol[e]*this.ex[e],this._tsConv(n))},setSustain:function(e,t,n){if(this.sustain[e]=t,n=this._tsConv(n),t<64)for(var r=this.notetab.length-1;r>=0;--r){var i=this.notetab[r];n>=i.t&&i.ch==e&&1==i.f&&this._releaseNote(i,n)}},allSoundOff:function(e){for(var t=this.notetab.length-1;t>=0;--t){var n=this.notetab[t];n.ch==e&&(this._pruneNote(n),this.notetab.splice(t,1))}},resetAllControllers:function(e){this.bend[e]=0,this.ex[e]=1,this.rpnidx[e]=16383,this.sustain[e]=0,this.chvol[e]&&(this.chvol[e].gain.value=this.vol[e]*this.ex[e],this.chmod[e].gain.value=0)},setBendRange:function(e,t){this.brange[e]=t},setProgram:function(e,t){this.debug&&console.log("Pg("+e+")="+t),this.pg[e]=t},setBend:function(e,t,n){n=this._tsConv(n);var r=100*this.brange[e]/127;this.bend[e]=(t-8192)*r/8192;for(var i=this.notetab.length-1;i>=0;--i){var o=this.notetab[i];if(o.ch==e)for(var s=o.o.length-1;s>=0;--s)o.o[s].frequency&&o.o[s].detune.setValueAtTime(this.bend[e],n)}},noteOn:function(e,t,n,r){0!=n?(r=this._tsConv(r),this.rhythm[e]?t>=35&&t<=81&&this._note(r,e,t,n,this.drummap[t-35]):this._note(r,e,t,n,this.program[this.pg[e]])):this.noteOff(e,t,r)},noteOff:function(e,t,n){if(!this.rhythm[e]){n=this._tsConv(n);for(var r=this.notetab.length-1;r>=0;--r){var i=this.notetab[r];n>=i.t&&i.ch==e&&i.n==t&&0==i.f&&(i.f=1,this.sustain[e]<64&&this._releaseNote(i,n))}}},_tsConv:function(e){return null==e||e<=0?(e=0,this.actx&&(e=this.actx.currentTime)):this.tsmode&&(e=.001*e-this.tsdiff),e},setTsMode:function(e){this.tsmode=e},send:function(e,t){var n=15&e[0],r=-16&e[0];if(!(r<128||r>=256))switch("suspended"==this.audioContext.state&&this.audioContext.resume(),r){case 176:switch(e[1]){case 1:this.setModulation(n,e[2],t);break;case 7:this.setChVol(n,e[2],t);break;case 10:this.setPan(n,e[2],t);break;case 11:this.setExpression(n,e[2],t);break;case 64:this.setSustain(n,e[2],t);break;case 98:case 98:this.rpnidx[n]=16383;break;case 100:this.rpnidx[n]=896&this.rpnidx[n]|e[2];break;case 101:this.rpnidx[n]=127&this.rpnidx[n]|e[2]<<7;break;case 6:0==this.rpnidx[n]&&(this.brange[n]=(e[2]<<7)+(127&this.brange[n]));break;case 38:0==this.rpnidx[n]&&(this.brange[n]=896&this.brange[n]|e[2]);break;case 120:case 123:case 124:case 125:case 126:case 127:this.allSoundOff(n);break;case 121:this.resetAllControllers(n)}break;case 192:this.setProgram(n,e[1]);break;case 224:this.setBend(n,e[1]+(e[2]<<7),t);break;case 144:this.noteOn(n,e[1],e[2],t);break;case 128:this.noteOff(n,e[1],t);break;case 240:if(255==e[0]){this.reset();break}if(254!=e[0]&&this.debug)for(var i=[],o=0;o<e.length;++o)i.push(e[o].toString(16));65==e[1]&&16==e[2]&&66==e[3]&&18==e[4]&&64==e[5]&&16==(240&e[6])&&21==e[7]&&(n=[9,0,1,2,3,4,5,6,7,8,10,11,12,13,14,15][15&e[6]],this.rhythm[n]=e[8])}},_createWave:function(e){for(var t=new Float32Array(e.length),n=new Float32Array(e.length),r=1;r<e.length;++r)t[r]=e[r];return this.actx.createPeriodicWave(n,t)},getAudioContext:function(){return this.actx},setAudioContext:function(e,t){this.audioContext=this.actx=e,this.dest=t,t||(this.dest=e.destination),this.tsdiff=.001*performance.now()-this.actx.currentTime,this.out=this.actx.createGain(),this.comp=this.actx.createDynamicsCompressor();var n=.5*this.actx.sampleRate|0;this.convBuf=this.actx.createBuffer(2,n,this.actx.sampleRate),this.noiseBuf={},this.noiseBuf.n0=this.actx.createBuffer(1,n,this.actx.sampleRate),this.noiseBuf.n1=this.actx.createBuffer(1,n,this.actx.sampleRate);for(var r=this.convBuf.getChannelData(0),i=this.convBuf.getChannelData(1),o=this.noiseBuf.n0.getChannelData(0),s=this.noiseBuf.n1.getChannelData(0),a=0;a<n;++a)a/n<Math.random()&&(r[a]=Math.exp(-3*a/n)*(Math.random()-.5)*.5,i[a]=Math.exp(-3*a/n)*(Math.random()-.5)*.5),o[a]=2*Math.random()-1;for(var u=0;u<64;++u){var h=10*Math.random()+1,c=10*Math.random()+1;for(a=0;a<n;++a){var f=Math.sin(a/n*2*Math.PI*440*h)*Math.sin(a/n*2*Math.PI*440*c);s[a]+=f/8}}for(this.useReverb&&(this.conv=this.actx.createConvolver(),this.conv.buffer=this.convBuf,this.rev=this.actx.createGain(),this.rev.gain.value=this.reverbLev,this.out.connect(this.conv),this.conv.connect(this.rev),this.rev.connect(this.comp)),this.setMasterVol(),this.out.connect(this.comp),this.comp.connect(this.dest),this.chvol=[],this.chmod=[],this.chpan=[],this.wave={w9999:this._createWave("w9999")},this.lfo=this.actx.createOscillator(),this.lfo.frequency.value=5,this.lfo.start(0),a=0;a<16;++a)this.chvol[a]=this.actx.createGain(),this.actx.createStereoPanner?(this.chpan[a]=this.actx.createStereoPanner(),this.chvol[a].connect(this.chpan[a]),this.chpan[a].connect(this.out)):(this.chpan[a]=null,this.chvol[a].connect(this.out)),this.chmod[a]=this.actx.createGain(),this.lfo.connect(this.chmod[a]),this.pg[a]=0,this.resetAllControllers(a);this.setReverbLev(),this.reset(),this.send([144,60,1]),this.send([144,60,0])}},this.sy.properties)this[t]=this.sy.properties[t].value;this.setQuality(1),e&&(null!=e.useReverb&&(this.useReverb=e.useReverb),null!=e.quality&&this.setQuality(e.quality),null!=e.voices&&this.setVoices(e.voices)),this.ready()}}},function(e,t,n){"use strict";n.r(t);var r=n(0),i=n(1);function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function a(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n(7)(i);var u=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:r.Note.C(),n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.Scale.Major(),i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.Scale.HarmonicMajor();o(this,e),a(this,"mSeq",void 0),a(this,"mKey",void 0),a(this,"mScale",void 0),a(this,"mChords",void 0),a(this,"mMelody",[]),a(this,"mMelodyScale",void 0),a(this,"mDegrees",[]),this.mKey=t,this.mScale=n,this.mMelodyScale=i}var t,n,u;return t=e,(n=[{key:"setRythm",value:function(e,t){this.mChords=e,this.mDegrees=t}},{key:"setMelody",value:function(e){this.mMelody=e}},{key:"setScale",value:function(e){this.mScale=e}},{key:"fixChordName",value:function(e){return e.split("/")[1]||e}},{key:"prepare",value:function(e){switch(this.mKey=new r.Note(e.key,2),e.scale){case"Major":this.mScale=r.Scale.Major(this.mKey);break;case"Minor":this.mScale=r.Scale.Minor(this.mKey);break;case"Pentatonic":this.mScale=r.Scale.PentatonicMajor(this.mKey);break;case"Enigmatic":this.mScale=r.Scale.EnigmaticMajor(this.mKey);break;case"Spanish":this.mScale=r.Scale.Spanish(this.mKey);break;case"HarmonicMajor":this.mScale=r.Scale.HarmonicMajor(this.mKey);break;case"MelodicMinor":this.mScale=r.Scale.MelodicMinorAscend(this.mKey)}switch(e.mode){case"Ionian":this.mScale=this.mScale.ionianMode();break;case"Dorian":this.mScale=this.mScale.dorianMode();break;case"Phrygian":this.mScale=this.mScale.phrygianMode();break;case"Lydian":this.mScale=this.mScale.lydianMode();break;case"Mixolydian":this.mScale=this.mScale.mixolydianMode();break;case"Aeolian":this.mScale=this.mScale.Minor(this.mKey);break;case"Locrian":this.mScale=this.mScale.locrianMode()}this.setRythm([new r.Chord(this.fixChordName(this.mScale.degree(e.progression[0]).asString+e.chords[0])).octave(2),new r.Chord(this.fixChordName(this.mScale.degree(e.progression[1]).asString+e.chords[1])).octave(2),new r.Chord(this.fixChordName(this.mScale.degree(e.progression[2]).asString+e.chords[2])).octave(2),new r.Chord(this.fixChordName(this.mScale.degree(e.progression[3]).asString+e.chords[3])).octave(2)],e.progression)}},{key:"playChord",value:function(e,t,n){var r=t,i=n;return e&&e.notes.forEach((function(e){r.wait(i).noteOn(0,e.midiKey,80).wait(2e3).noteOff(0,e.midiKey)})),r}},{key:"play",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;this.mSeq||(this.mSeq=i.synth.Tiny());var n=this.mSeq,r=t;return this.mChords&&this.mChords.forEach((function(t){n=e.playChord(t,n,r),r+=2e3})),r}},{key:"sequencer",get:function(){return this.mSeq}},{key:"key",get:function(){return this.mKey}},{key:"chords",get:function(){return this.mChords}},{key:"scale",get:function(){return this.mScale}},{key:"I",get:function(){return this.mScale.degree(1)}},{key:"II",get:function(){return this.mScale.degree(2)}},{key:"III",get:function(){return this.mScale.degree(3)}},{key:"IV",get:function(){return this.mScale.degree(4)}},{key:"V",get:function(){return this.mScale.degree(5)}},{key:"VI",get:function(){return this.mScale.degree(6)}},{key:"VII",get:function(){return this.mScale.degree(7)}}])&&s(t.prototype,n),u&&s(t,u),e}();n.d(t,"Sequencer",(function(){return u})),n.d(t,"MT",(function(){return r}))}])}));